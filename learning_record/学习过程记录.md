# 学习过程记录

https://github.com/qbdl/3D_RPG_learning.git 仓库的开发学习记录~.

[TOC]

## 3D RPG Course | Core 核心功能

### 01: Create Project 创建项目导入素材

安装 Universal RP 并将整个项目升级到URP



### 02: Build Level 尝试熟悉基本工具

**自动吸附顶点**：按住V键不松手，右键点击物体的想要位置并移动方块，来自动吸附顶点。

- q/w/e/r/t的快捷键来快捷操作

**切换相机视角**：选中对应的camera,右击并按住对应视角不松手，按住ctrl+shift+F来自动设置相机为当前视角。

<img src="./assets/image-20250601155226955.png" alt="image-20250601155226955" style="zoom: 80%;" />



### 03: PolyBrush 发挥创意构建场景

PolyBrush使用：

- 第1个：改变地形（这里我这里一般是改变竖直方向，所以选择Brush Mirroring的Y轴），点击物体，然后选择第一个图标，按住是上升，按住ctrl再按住是下降
- 第2个：羽化，用于柔和边缘
- 第3个：将物体刷上不同颜色，用于分区（需要创建material导入到对应物体）
- 第4个：将prefab预制体刷到场景中
- 第5个：刷材质

<img src="./assets/image-20250601160858295.png" alt="image-20250601160858295" style="zoom:50%;" />



### 04: Navigation 智能导航地图烘焙

<img src="./assets/image-20250605090842898.png" alt="image-20250605090842898" style="zoom: 80%;" />



### 05: MouseManager 鼠标控制人物移动

已经可以控制人物进行移动了.

<img src="./assets/image-20250605090904892.png" alt="image-20250605090904892" style="zoom: 80%;" />



### 06: SetCursor 设置鼠标指针

- 实现 MouseManager 单例模式
- event Action 的用法
- PlayerController 函数方法
- 订阅 MouseManager 的事件
- 修改鼠标指针



### 07: Cinemachine & Post Processing 摄像机跟踪和后处理

- 添加虚拟相机实现跟踪人物移动
- 添加 Fog 迷雾效果
- 添加 Post Processing 后处理让场景看起来更好看

<img src="./assets/image-20250605112430925.png" alt="image-20250605112430925" style="zoom: 80%;" />



### 08: Animator 动画控制器

- 浏览动画片段 (idle,walk,run)
- 创建 Player 的 Animator Controller
- 创建变量以及 Blend Tree 混合树动画
- 通过代码实现移动配合动画切换



### 09: Shader Graph 遮挡剔除

- Unity 2020.2 版本 Shader Graph 介绍
- 创建新的材质作为遮挡剔除显示的材质
- URP Asset 当中添加 Render Feature 实现前后遮挡选择

<img src="./assets/image-20250605130513241.png" alt="image-20250605130513241" style="zoom:80%;" />



### 10: Enemy Set States 设置敌人的基本属性和状态

- 导入敌人素材
- 创建 EnemyController 脚本并通过脚本添加 Agent
- 设置 Agent 参数
- 枚举变量设置敌人状态
- 修改鼠标指针到攻击图标

<img src="./assets/image-20250605142931363.png" alt="image-20250605142931363" style="zoom: 80%;" />



### 11: Player Attack 实现攻击动画

- 通过协程实现移动到敌人面前并采取攻击
- agent 是否停止的切换控制
- 打断攻击停止协程方法
- Attack 动画设置
- 修改鼠标指针到攻击图标



### 12: FoundPlayer 找到Player追击

- 使用 Physics.OverLapSphere 检测周围是否有 Player
- 函数判断切换到追击模式
- 添加 FreeLook 的 Cinemachine 实现自由移动的第三人称镜头



小Tips:如果滚轮操作没有明显反应，调大滚轮里的Speed即可。

<img src="./assets/image-20250605151507101.png" alt="image-20250605151507101" style="zoom: 80%;" />

​		似乎unity系统在这一步会自动提示API update, 选择更新即可。



### 13: Enemy Animator设置敌人的动画控制器

- 设定一些列参数配合代码切换动画
- 创建多个 Animator Layer 管理动画的状态
- 实现追击玩家切换动画 / 脱战返回 idle

<img src="./assets/image-20250605163216243.png" alt="image-20250605163216243" style="zoom: 50%;" />



### 14: Patrol Randomly 随机巡逻点

- 设置参数生成随机巡逻点
- 利用 OnDrawGizmosSelected 画出可视范围
- 使用 NavMesh.SamplePosition 获得一个可行的随机点
- 实现到巡逻点等候时间
- 脱战后返回上一个状态

<img src="./assets/image-20250605172750793.png" alt="image-20250605172750793" style="zoom:50%;" />



### 15: CharacterStats 人物基本属性和数值





## 3D RPG Course ｜高级教程