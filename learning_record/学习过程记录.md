# å­¦ä¹ è¿‡ç¨‹è®°å½•

https://github.com/qbdl/3D_RPG_learning ä»“åº“çš„å¼€å‘å­¦ä¹ è®°å½•.

[TOC]

## 3D RPG Course | Core æ ¸å¿ƒåŠŸèƒ½

### 01: Create Project åˆ›å»ºé¡¹ç›®å¯¼å…¥ç´ æ

å®‰è£… Universal RP å¹¶å°†æ•´ä¸ªé¡¹ç›®å‡çº§åˆ°URP



### 02: Build Level å°è¯•ç†Ÿæ‚‰åŸºæœ¬å·¥å…·

**è‡ªåŠ¨å¸é™„é¡¶ç‚¹**ï¼šæŒ‰ä½Vé”®ä¸æ¾æ‰‹ï¼Œå³é”®ç‚¹å‡»ç‰©ä½“çš„æƒ³è¦ä½ç½®å¹¶ç§»åŠ¨æ–¹å—ï¼Œæ¥è‡ªåŠ¨å¸é™„é¡¶ç‚¹ã€‚

- q/w/e/r/tçš„å¿«æ·é”®æ¥å¿«æ·æ“ä½œ

**åˆ‡æ¢ç›¸æœºè§†è§’**ï¼šé€‰ä¸­å¯¹åº”çš„camera,å³å‡»å¹¶æŒ‰ä½å¯¹åº”è§†è§’ä¸æ¾æ‰‹ï¼ŒæŒ‰ä½ctrl+shift+Fæ¥è‡ªåŠ¨è®¾ç½®ç›¸æœºä¸ºå½“å‰è§†è§’ã€‚

**ç§»åŠ¨è§†è§’**ï¼šæŒ‰ä½é¼ æ ‡å³é”®ï¼Œç‚¹å‡»â€œQ"/â€E"è¿›è¡Œä¸Šä¸‹ç§»åŠ¨ï¼Œâ€œAâ€/"D"è¿›è¡Œå·¦å³ç§»åŠ¨ï¼Œâ€œWâ€"S"è¿›è¡Œå‰åï¼ˆè¿œè¿‘ï¼‰ç§»åŠ¨ã€‚

<img src="./assets/image-20250601155226955.png" alt="image-20250601155226955" style="zoom: 80%;" />

è§†è§’å‡ºç°ç±»ä¼¼é•‚ç©ºçš„æƒ…å†µï¼šå°†å³ä¾§"iso"ç‚¹å‡»ä¸€ä¸‹ï¼Œä¿®æ”¹ä¸ºâ€œperspectiveâ€å³å¯ã€‚

<img src="./assets/image-20250617211052007.png" alt="image-20250617211052007" style="zoom: 40%;" /><img src="./assets/image-20250617211122971.png" alt="image-20250617211122971" style="zoom: 45%;" />



### 03: PolyBrush å‘æŒ¥åˆ›æ„æ„å»ºåœºæ™¯

PolyBrushä½¿ç”¨ï¼š

- ç¬¬1ä¸ªï¼šæ”¹å˜åœ°å½¢ï¼ˆè¿™é‡Œæˆ‘è¿™é‡Œä¸€èˆ¬æ˜¯æ”¹å˜ç«–ç›´æ–¹å‘ï¼Œæ‰€ä»¥é€‰æ‹©Brush Mirroringçš„Yè½´ï¼‰ï¼Œç‚¹å‡»ç‰©ä½“ï¼Œç„¶åé€‰æ‹©ç¬¬ä¸€ä¸ªå›¾æ ‡ï¼ŒæŒ‰ä½æ˜¯ä¸Šå‡ï¼ŒæŒ‰ä½ctrlå†æŒ‰ä½æ˜¯ä¸‹é™
- ç¬¬2ä¸ªï¼šç¾½åŒ–ï¼Œç”¨äºæŸ”å’Œè¾¹ç¼˜
- ç¬¬3ä¸ªï¼šå°†ç‰©ä½“åˆ·ä¸Šä¸åŒé¢œè‰²ï¼Œç”¨äºåˆ†åŒºï¼ˆéœ€è¦åˆ›å»ºmaterialå¯¼å…¥åˆ°å¯¹åº”ç‰©ä½“ï¼‰
- ç¬¬4ä¸ªï¼šå°†prefabé¢„åˆ¶ä½“åˆ·åˆ°åœºæ™¯ä¸­
- ç¬¬5ä¸ªï¼šåˆ·æè´¨

<img src="./assets/image-20250601160858295.png" alt="image-20250601160858295" style="zoom:50%;" />



### 04: Navigation æ™ºèƒ½å¯¼èˆªåœ°å›¾çƒ˜ç„™

<img src="./assets/image-20250605090842898.png" alt="image-20250605090842898" style="zoom: 80%;" />



### 05: MouseManager é¼ æ ‡æ§åˆ¶äººç‰©ç§»åŠ¨

å·²ç»å¯ä»¥æ§åˆ¶äººç‰©è¿›è¡Œç§»åŠ¨äº†.

<img src="./assets/image-20250605090904892.png" alt="image-20250605090904892" style="zoom: 80%;" />



### 06: SetCursor è®¾ç½®é¼ æ ‡æŒ‡é’ˆ

- å®ç° MouseManager å•ä¾‹æ¨¡å¼
- event Action çš„ç”¨æ³•
- PlayerController å‡½æ•°æ–¹æ³•
- è®¢é˜… MouseManager çš„äº‹ä»¶
- ä¿®æ”¹é¼ æ ‡æŒ‡é’ˆ



### 07: Cinemachine & Post Processing æ‘„åƒæœºè·Ÿè¸ªå’Œåå¤„ç†

- æ·»åŠ è™šæ‹Ÿç›¸æœºå®ç°è·Ÿè¸ªäººç‰©ç§»åŠ¨
- æ·»åŠ  Fog è¿·é›¾æ•ˆæœ
- æ·»åŠ  Post Processing åå¤„ç†è®©åœºæ™¯çœ‹èµ·æ¥æ›´å¥½çœ‹

<img src="./assets/image-20250605112430925.png" alt="image-20250605112430925" style="zoom: 80%;" />



### 08: Animator åŠ¨ç”»æ§åˆ¶å™¨

- æµè§ˆåŠ¨ç”»ç‰‡æ®µ (idle,walk,run)
- åˆ›å»º Player çš„ Animator Controller
- åˆ›å»ºå˜é‡ä»¥åŠ Blend Tree æ··åˆæ ‘åŠ¨ç”»
- é€šè¿‡ä»£ç å®ç°ç§»åŠ¨é…åˆåŠ¨ç”»åˆ‡æ¢



### 09: Shader Graph é®æŒ¡å‰”é™¤

- Unity 2020.2 ç‰ˆæœ¬ Shader Graph ä»‹ç»
- åˆ›å»ºæ–°çš„æè´¨ä½œä¸ºé®æŒ¡å‰”é™¤æ˜¾ç¤ºçš„æè´¨
- URP Asset å½“ä¸­æ·»åŠ  Render Feature å®ç°å‰åé®æŒ¡é€‰æ‹©

<img src="./assets/image-20250605130513241.png" alt="image-20250605130513241" style="zoom:80%;" />



### 10: Enemy Set States è®¾ç½®æ•Œäººçš„åŸºæœ¬å±æ€§å’ŒçŠ¶æ€

- å¯¼å…¥æ•Œäººç´ æ
- åˆ›å»º EnemyController è„šæœ¬å¹¶é€šè¿‡è„šæœ¬æ·»åŠ  Agent
- è®¾ç½® Agent å‚æ•°
- æšä¸¾å˜é‡è®¾ç½®æ•ŒäººçŠ¶æ€
- ä¿®æ”¹é¼ æ ‡æŒ‡é’ˆåˆ°æ”»å‡»å›¾æ ‡

<img src="./assets/image-20250605142931363.png" alt="image-20250605142931363" style="zoom: 80%;" />



### 11: Player Attack å®ç°æ”»å‡»åŠ¨ç”»

- é€šè¿‡åç¨‹å®ç°ç§»åŠ¨åˆ°æ•Œäººé¢å‰å¹¶é‡‡å–æ”»å‡»
- agent æ˜¯å¦åœæ­¢çš„åˆ‡æ¢æ§åˆ¶
- æ‰“æ–­æ”»å‡»åœæ­¢åç¨‹æ–¹æ³•
- Attack åŠ¨ç”»è®¾ç½®
- ä¿®æ”¹é¼ æ ‡æŒ‡é’ˆåˆ°æ”»å‡»å›¾æ ‡



### 12: FoundPlayer æ‰¾åˆ°Playerè¿½å‡»

- ä½¿ç”¨ Physics.OverLapSphere æ£€æµ‹å‘¨å›´æ˜¯å¦æœ‰ Player
- å‡½æ•°åˆ¤æ–­åˆ‡æ¢åˆ°è¿½å‡»æ¨¡å¼
- æ·»åŠ  FreeLook çš„ Cinemachine å®ç°è‡ªç”±ç§»åŠ¨çš„ç¬¬ä¸‰äººç§°é•œå¤´



å°Tips:å¦‚æœæ»šè½®æ“ä½œæ²¡æœ‰æ˜æ˜¾ååº”ï¼Œè°ƒå¤§æ»šè½®é‡Œçš„Speedå³å¯ã€‚

<img src="./assets/image-20250605151507101.png" alt="image-20250605151507101" style="zoom: 80%;" />

â€‹		ä¼¼ä¹unityç³»ç»Ÿåœ¨è¿™ä¸€æ­¥ä¼šè‡ªåŠ¨æç¤ºAPI update, é€‰æ‹©æ›´æ–°å³å¯ã€‚



### 13: Enemy Animatorè®¾ç½®æ•Œäººçš„åŠ¨ç”»æ§åˆ¶å™¨

- è®¾å®šä¸€äº›åˆ—å‚æ•°é…åˆä»£ç åˆ‡æ¢åŠ¨ç”»
- åˆ›å»ºå¤šä¸ª Animator Layer ç®¡ç†åŠ¨ç”»çš„çŠ¶æ€
- å®ç°è¿½å‡»ç©å®¶åˆ‡æ¢åŠ¨ç”» / è„±æˆ˜è¿”å› idle

<img src="./assets/image-20250605163216243.png" alt="image-20250605163216243" style="zoom: 50%;" />



### 14: Patrol Randomly éšæœºå·¡é€»ç‚¹

- è®¾ç½®å‚æ•°ç”Ÿæˆéšæœºå·¡é€»ç‚¹
- åˆ©ç”¨ OnDrawGizmosSelected ç”»å‡ºå¯è§†èŒƒå›´
- ä½¿ç”¨ NavMesh.SamplePosition è·å¾—ä¸€ä¸ªå¯è¡Œçš„éšæœºç‚¹
- å®ç°åˆ°å·¡é€»ç‚¹ç­‰å€™æ—¶é—´
- è„±æˆ˜åè¿”å›ä¸Šä¸€ä¸ªçŠ¶æ€

<img src="./assets/image-20250605172750793.png" alt="image-20250605172750793" style="zoom:50%;" />



### 15: CharacterStats äººç‰©åŸºæœ¬å±æ€§å’Œæ•°å€¼

- ä»‹ç»äº†è§£ ScriptableObject çš„åŠŸèƒ½
- åˆ›å»º CharacterData_SO å’Œ CharacterStats ä»£ç è„šæœ¬
- è®¾ç½®åŸºæœ¬çš„äººç‰©å±æ€§
- Properties å±æ€§çš„ç”¨æ³• get set å®ç°è¯»å–æ•°æ®



### 16: AttackData æ”»å‡»å±æ€§

- åˆ›å»º AttackData_SO æ·»åŠ åŸºæœ¬æ”»å‡»å±æ€§
- CharacterStats ä¸­è¯»å–æ•°æ®
- EnemyController ä¸­åŠ å…¥æ”»å‡»èŒƒå›´åˆ¤å®š / CDæ—¶é—´åˆ¤å®š / æš´å‡»ç‡è®¡ç®—
- æ·»åŠ  Slime Animator ä¸­çš„ä¸¤ç§åŠ¨ç”» 



### 17: Execute Attack å®ç°æ”»å‡»æ•°å€¼è®¡ç®—

- ä¸º Player æ·»åŠ æ”»å‡»å’Œæš´å‡»çš„åŠ¨ç”»å’Œå‚æ•°

- CharacterStats ä»£ç æ·»åŠ  TakeDamage å‡½æ•°è®¡ç®—ä¼¤å®³

- æ·»åŠ  Animation Event åœ¨æ”»å‡»çš„æ—¶å€™æ‰§è¡Œå‡½æ•°æ–¹æ³• Hit

- è§£å†³FBXå¯¼å…¥åŠ¨ç”»æ— æ³•ç¼–è¾‘çš„é—®é¢˜

  <img src="./assets/image-20250606090533508.png" alt="image-20250606090533508" style="zoom: 80%;" />

p.s. æ³¨æ„æ¯æ¬¡è¯•ç©åï¼ŒScript Objecté‡Œçš„æ•°æ®éœ€è¦æ¢å¤åˆ°åŸæœ‰å†…å®¹ã€‚



### 18: Guard & Dead å®ˆå«çŠ¶æ€å’Œæ­»äº¡çŠ¶æ€

- æ·»åŠ  Enemy å’Œ Player çš„å—ä¼¤åŠ¨ç”»å’Œæ­»äº¡åŠ¨ç”»
- è®¾ç½®å®ˆå«çš„è§’åº¦å®ç°è„±ç¦»æˆ˜æ–—å½’ä¸ºåç¼“æ…¢è½¬å›åˆå§‹è§’åº¦
- æ·»åŠ æš´å‡»ä¼¤å®³è§¦å‘é˜²å¾¡è€…çš„å—ä¼¤åŠ¨ç”»
- å®ç°æ•Œäººæ­»äº¡åé”€æ¯

<img src="./assets/image-20250606103344674.png" alt="image-20250606103344674" style="zoom:80%;" />



### 19: æ³›å‹å•ä¾‹æ¨¡å¼ Singleton

- æ³›å‹ç±»çš„å†™æ³•
- GameManager è·å¾— PlayerStats çš„æ³¨å†Œ
- ä¿®æ”¹ MouseManager ç»§æ‰¿æ³›å‹å•ä¾‹åŸºç±»



### 20: Observer Pattern æ¥å£å®ç°è§‚å¯Ÿè€…æ¨¡å¼çš„è®¢é˜…å’Œå¹¿æ’­

- åˆ›å»º IEndGameObserver æ¥å£
- åœ¨ GameManager ä¸­ç”¨æ¥ç®¡ç†æ‰€æœ‰è®¢é˜…è€…å¹¶ä¸”å¹¿æ’­
- å®ç° Player æ­»äº¡æ•Œäººé›†ä½“æ¬¢å‘¼èƒœåˆ©

<img src="./assets/image-20250606102936559.png" alt="image-20250606102936559" style="zoom:80%;" />



### 21: More Enemies åˆ¶ä½œæ›´å¤šçš„æ•Œäºº

- è§£å†³å¤åˆ¶å‡ºæ¥çš„æ•Œäººå…¬ç”¨åŒä¸€ä¸ªæ•°æ®çš„é—®é¢˜
- è§£å†³ Player æ­»äº¡åä»ç„¶å¯ä»¥ç§»åŠ¨çš„é—®é¢˜
- è§£å†³ç¼–è¾‘å™¨çª—å£çš„æŠ¥é”™é—®é¢˜
- ä½¿ç”¨ Animator override controller åˆ¶ä½œ ä¹Œé¾Ÿ æ•Œäºº
- æ·»åŠ  å…½äºº å’Œ çŸ³å¤´äºº çš„ç´ æç®€å•æ‘†æ”¾

<img src="./assets/image-20250606111414731.png" alt="image-20250606111414731" style="zoom: 50%;" />



### 22: Setup Grunt è®¾ç½®å…½äººå£«å…µ

- æ·»åŠ ç‹¬ç«‹çš„ Animator
- ç¼–å†™ Animator Behavior æ§åˆ¶åŠ¨ç”»æ’­æ”¾æœŸé—´çš„ Agent
- åˆ›å»ºå•ç‹¬çš„è„šæœ¬ç»§æ‰¿ EnemyController
- è®¾ç½®å•ç‹¬çš„å‡»é£å‡½æ•°
- Player æ·»åŠ å‡»æ™•åŠ¨ç”»

<img src="./assets/image-20250606125316424.png" alt="image-20250606125316424" style="zoom: 50%;" />



### 23: Extension Method æ‰©å±•æ–¹æ³•

- åˆ›å»º Transform çš„æ‰©å±•æ–¹æ³•åˆ¤æ–­æ”»å‡»ç›®æ ‡æ˜¯å¦åœ¨é¢å‰
- Vector3.Dot çš„ç”¨æ³•è¯´æ˜



Tips:VSCodeä¸­ç•Œé¢â€œOUTLINEâ€œæ¥å¿«é€ŸæŸ¥æ‰¾å‡½æ•°ã€‚



### 24: Setup Golem è®¾ç½®çŸ³å¤´äººBoss

- è®¾ç½® Animator override controller è°ƒæ•´åŠ¨ç”»ç‰‡æ®µ
- åˆ›å»ºå•ç‹¬çš„è„šæœ¬ç»§æ‰¿ EnemyController
- è®¾ç½®å•ç‹¬çš„å‡»é£å‡½æ•°åœ¨ Animation Event ä¸­è°ƒç”¨

<img src="./assets/image-20250606142057643.png" alt="image-20250606142057643" style="zoom:80%;" />



### 25: Throw Rocks è®¾ç½®å¯ä»¥æ‰”å‡ºçš„çŸ³å¤´

- Player æ·»åŠ  StopingDistance çš„åˆ‡æ¢æ§åˆ¶
- åˆ›å»º Rock å¹¶ç¼–è¾‘ä»£ç å¯ä»¥é£å‘ Player
- è®¾ç½®ä¸º Prefab è®©çŸ³å¤´äººå¯ä»¥åœ¨åŠ¨ç”»é‡Œç”Ÿæˆå¹¶æŠ•æ·è¿™ä¸ª Rock

<img src="./assets/image-20250606145804832.png" alt="image-20250606145804832" style="zoom: 60%;" />



### 26: Kick it Back åå‡»çŸ³å¤´äºº

- å®ç°å‡»é£ Player å¹¶äº§ç”Ÿä¼¤å®³
- è®¾ç½® Rock çš„ä¸åŒçŠ¶æ€ï¼Œæ—¢èƒ½æ”»å‡» Player ä¹Ÿå¯ä»¥ç”¨æ¥åå‡»çŸ³å¤´äºº
- åˆ›å»º Particle System å®ç°çŸ³å¤´ç¢è£‚æ•ˆæœ

<img src="./assets/image-20250606161849650.png" alt="image-20250606161849650" style="zoom:80%;" />



### 27: Health Bar è®¾ç½®è¡€æ¡æ˜¾ç¤º

- åˆ›å»º UI åˆ¶ä½œè¡€æ¡ Prefab
- åˆ›å»º HealthBarUI ä»£ç æŒ‚è½½æ¯ä¸€ä¸ªæ•Œäººèº«ä¸Š
- è·å¾—è¡€æ¡æ˜¾ç¤ºçš„ HealthBarPoint åæ ‡
- ä½¿ç”¨ Event Action çš„æ–¹æ³•åœ¨æ¯æ¬¡æ”»å‡»çš„æ—¶å€™æ›´æ–°è¡€é‡

<img src="./assets/image-20250608123206050.png" alt="image-20250608123206050" style="zoom:80%;" />

p.s. ä¹‹å‰ä¹Œé¾Ÿçš„æ”»å‡»HitåŠ¨ç”»æ²¡æœ‰åŠ åœ¨animationä¸­ï¼Œæˆ‘åœ¨è¿™é‡Œå‘ç°å¹¶è¡¥ä¸Šäº†ã€‚



### 28: Player LevelUp ç©å®¶å‡çº§ç³»ç»Ÿ

- ä¿®æ”¹ CharacterData æ·»åŠ ç­‰çº§ç›¸å…³å˜é‡
- åˆ›å»ºå‡çº§å‡½æ•°æ–¹æ³•
- æ€æ€ªè·å¾—ç»éªŒå‡çº§å±æ€§



### 29: Player UI æ·»åŠ ç©å®¶ä¿¡æ¯æ˜¾ç¤º

- åˆ¶ä½œ PlayerHealth UI
- Canvas æ¸²æŸ“æ¨¡å¼è®¾ç½®
- å®æ—¶æ›´æ–°è¡€é‡å’Œç»éªŒå€¼

<img src="./assets/image-20250608162049443.png" alt="image-20250608162049443" style="zoom:80%;" />

å°Tips: Ctrl+D ç”¨äºå¤åˆ¶



### 30: Create Portal åˆ›å»ºä¼ é€é—¨

- åˆ©ç”¨ Shader Graph åˆ›å»ºä¼ é€é—¨
- åˆ›å»º TransitionPoint å’Œ TransitionDestination è„šæœ¬æ§åˆ¶ä¼ é€å’Œç»ˆç‚¹

<img src="./assets/image-20250608172646825.png" alt="image-20250608172646825" style="zoom:80%;" />



### 31: Transition å®ç°åŒåœºæ™¯å†…ä¼ é€

- åˆ›å»ºåç¨‹å®ç°åŒåœºæ™¯ä¼ é€ç‚¹ä¼ é€

<img src="./assets/image-20250609093254421.png" alt="image-20250609093254421" style="zoom: 60%;" />



### 32: Different Scene è·¨åœºæ™¯ä¼ é€

- æ‰€æœ‰çš„æ§åˆ¶ç±»å•ä¾‹ä»£ç æ·»åŠ  DontDestroyOnLoad
- å®ç°è·¨åœºæ™¯å¼‚æ­¥åŠ è½½å¹¶ç”Ÿæˆ Player
- è®¾ç½® Game Manager ä¸º FreeLook æ‘„åƒæœºæ·»åŠ  Follow å’Œ LookAt çš„ç›®æ ‡
- PlayerController æ·»åŠ  OnDisable å–æ¶ˆè®¢é˜…



å°Tips : åˆ›å»ºarchçš„æ—¶å€™ä½¿ç”¨Probuilderçš„æ—¶å€™å¯ä»¥ä½¿ç”¨è¿™ä¸ªFace Selectionç„¶åæ‹–åŠ¨è¿›è¡Œç”Ÿæˆå®Œæ•´Archã€‚

<img src="./assets/image-20250609104745522.png" alt="image-20250609104745522" style="zoom: 50%;" />

ä½¿ç”¨ä¸‹ä¸€ä¸ªåœºæ™¯çš„Wallï¼Œä½¿ç”¨ååœ¨Navigationä¸­è®¾ç½®Wall&ArchæˆNavigation Static,å¹¶è®¾ç½®æˆâ€œNot Walkable",å†è¿›è¡ŒBakeã€‚

<img src="./assets/image-20250609110544378.png" alt="image-20250609110544378" style="zoom:50%;" />

æ–°åœºæ™¯å¦‚æœä½¿ç”¨demoï¼ŒGroundç­‰å†…å®¹è¿›è¡ŒNavigationçš„è®¾ç½®ï¼ŒBakeã€‚

â€‹				<img src="./assets/image-20250609170650638.png" alt="image-20250609170650638" style="zoom:33%;" /><img src="./assets/image-20250609170655382.png" alt="image-20250609170655382" style="zoom:33%;" />

p.s. ä¹‹å‰ç›´æ¥ç”¨ç¬¬ä¸€åœºæ™¯çš„freelook cameraç”Ÿæˆprefabæ‹–åˆ°ç¬¬äºŒåœºæ™¯â€”â€”è¿™æ ·ä¼¼ä¹æ— æ³•èµ·åˆ°æ•ˆæœï¼Œäºæ˜¯é‡æ–°åˆ›å»ºfreelook cameraåå³å¯ã€‚

æ‰©å»ºåœºæ™¯ï¼š

<img src="./assets/image-20250624123414868.png" alt="image-20250624123414868" style="zoom:50%;" />



### 33: Save Data ä¿å­˜æ•°æ®

- äº†è§£ JsonUtility çš„ç”¨æ³•
- äº†è§£ PlayerPrefs çš„ç”¨æ³•
- åˆ›å»º SaveManager å®ç°ä¿å­˜ç©å®¶æ•°æ®



### 34: Main Menu åˆ¶ä½œä¸»èœå•

- åˆ¶ä½œ Main åœºæ™¯
- æ·»åŠ  Canvas ç†Ÿæ‚‰ Render Mode
- åˆ›å»º MainMenu å®ç°æŒ‰é’® AddListener æ·»åŠ å¯¹åº”å‡½æ•°æ–¹æ³•
- SceneController æ·»åŠ æ–°çš„åç¨‹é…åˆåœºæ™¯è½¬æ¢

<img src="./assets/image-20250609222724997.png" alt="image-20250609222724997" style="zoom: 60%;" />

å°Tips : 

- è¿›å…¥æ¸¸æˆ å†é€€å‡ºæ¸¸æˆè¿”å›ä¸»èœå•ç•Œé¢ ä¸»èœå•çš„åœºæ™¯å°±ä¼šå˜å¾—ååˆ†æš—
  - æ‰“å¼€Auto Generate Lighting(åˆ‡æ¢ååœºæ™¯ä¸ä¼šè‡ªåŠ¨çƒ˜åŸ¹ç¯å…‰ï¼Œæ‰€ä»¥ä¼šå¾ˆæš—)ã€‚

- NullReferenceException: Object reference not set to an instance of an object
  - è¿™ä¸ªæ˜¯è¯¥ç‰ˆæœ¬Unityè‡ªå¸¦çš„bugï¼Œé‡å¯unityå³å¯ã€‚

- è§£å†³æ ‡é¢˜å¾ˆç³Šçš„é—®é¢˜

  - è¿™ä¸ªæ˜¯å› ä¸ºportalæ‘†æ”¾åœ¨äº†â€œThe Knight"ä¸â€New Game"çš„ä¸­é—´ï¼Œå°†portalç§»åˆ°å®ƒä»¬çš„åŒä¸€ä¾§å³å¯ã€‚

    <img src="./assets/image-20250610122040338.png" alt="image-20250610122040338" style="zoom:50%;" />

- Copyrightéƒ¨åˆ†å¦‚æœæƒ³è¦è·Ÿbuttonä¸€æ ·æ¶ˆå¤±

  - åŒæ ·è®¾ç½®screen space-camera,è°ƒæ•´planeè·ç¦»è‡³å¯è§ä½ç½®ï¼Œç„¶åå†è®¾ç½®æˆworld spaceå³å¯ã€‚

  

  


Fix a Problem : 

- æ€ªç‰©çš„æ­»äº¡å’Œdestroyéƒ½å¾ˆæ­£å¸¸ï¼Œä½†æ˜¯ç©å®¶å´åœ¨æ€ªç‰©æ­»äº¡ä¹‹åç»§ç»­æ”»å‡»ï¼Œéšåunityå°±ä¼šæŠ¥é”™`MissingReferenceException: The object of type 'GameObject' has been destroyed but you are still trying to access it.`â€”â€”è§£å†³æ–¹æ³•ï¼šæ”»å‡»åŠ¨ç”»çš„animationé‡Œæœ‰ä¸€ä¸ªè‡ªåŠ¨å¾ªç¯çš„é€‰é¡¹ï¼Œå…³é—­å°±å¥½äº†ã€‚

  <img src="./assets/image-20250609221356831.png" alt="image-20250609221356831" style="zoom: 40%;" />



### 35: SceneFader åœºæ™¯è½¬æ¢çš„æ¸å…¥æ¸å‡º

- æ·»åŠ  Timeline äº†è§£åŸºæœ¬ç”¨æ³•

- åˆ©ç”¨ Canvas Group åˆ¶ä½œ SceneFader

- åç¨‹å¥—åç¨‹çš„ç”¨æ³•

- å®ç° Player æ­»äº¡è¿”å›ä¸»èœå•

  

  <img src="./assets/image-20250610102429188.png" alt="image-20250610102429188" style="zoom:40%;" /><img src="./assets/image-20250610095954130.png" alt="image-20250610095954130" style="zoom: 40%;" />

å°Tips : 

- playeræ­»äº¡ä¸€æ¬¡åï¼Œå†å¼€å§‹æ¸¸æˆï¼Œå†æ¬¡æ­»äº¡å°±ä¸ä¼šè‡ªåŠ¨è¿”å›ä¸»èœå•
  - åŸå› æ˜¯å†æ¬¡å¼€å§‹æ¸¸æˆåï¼ŒfadeFinishedè¿™ä¸ªå¸ƒå°”å€¼è¿˜æ˜¯falseã€‚åœ¨LoadLevel()è¿™ä¸ªåç¨‹é‡ŒåŠ ä¸Š`yield return fadeFinished = true;`è¿™æ ·å†æ¬¡è¿›å…¥æ¸¸æˆæ—¶ï¼ŒfadeFinishedå˜æˆäº†trueï¼Œç©å®¶æ­»äº¡æ—¶å°±å¯ä»¥æ‰§è¡ŒLoadMain()äº†ã€‚
- playerç¬¬ä¸€æ¬¡æ­»äº¡é‡æ–°å›åˆ°ä¸»èœå•ï¼Œä½†æ˜¯ç‚¹å‡»æŒ‰é’®ä¸ä¼šè¿›å…¥æ–°æ¸¸æˆ
  - æŠŠCanvasGroupé‡Œçš„blockRaycastå…³æ‰å³å¯ã€‚



### 36: Build & Runæ‰“åŒ…åŠè¿è¡Œ

- Build Settings çš„ç›¸å…³è®¾ç½®
- Player Settings çš„ç›¸å…³è®¾ç½®
- å¦‚æœæ·»åŠ å„ç§å¹³å°çš„æ”¯æŒ



## MileStone 1

### æ•ˆæœå›¾ç‰‡åˆé›†

<img src="./assets/image-20250611205752295.png" alt="image-20250611205752295" style="zoom:25%;" />

â€‹			<img src="./assets/image-20250611205327921.png" alt="image-20250611205327921" style="zoom: 20%;" /><img src="./assets/image-20250611205423609.png" alt="image-20250611205423609" style="zoom:20%;" />

â€‹			<img src="./assets/image-20250611205554519.png" alt="image-20250611205554519" style="zoom:20%;" /><img src="./assets/image-20250611205504810.png" alt="image-20250611205504810" style="zoom:20%;" />

â€‹			<img src="./assets/image-20250611205525926.png" alt="image-20250611205525926" style="zoom:20%;" /><img src="./assets/image-20250611205636447.png" alt="image-20250611205636447" style="zoom:20%;" />

<img src="./assets/image-20250611205725312.png" alt="image-20250611205725312" style="zoom: 25%;" />



### Improvements


- äººç‰©ç§»åŠ¨wasd,é¼ æ ‡æ§åˆ¶è§†è§’


- åŠ å…¥éŸ³æ•ˆ



### Coreæ ¸å¿ƒåŠŸèƒ½å¼€å‘&å­¦ä¹ æ€»ç”¨æ—¶

46h 45min 37s.



## 3D RPG Course ï½œé«˜çº§æ•™ç¨‹

### ç« èŠ‚1 èƒŒåŒ…ç³»ç»Ÿ

#### 1.é¡¹ç›®ä»‹ç»

èƒŒåŒ…ç³»ç»Ÿç®€å•æ¥è¯´å°±æ˜¯ UI å’Œ é€»è¾‘ä»£ç  çš„ç»„åˆã€‚**è¿™å°±æ„å‘³ç€ 2D å’Œ 3D æ¸¸æˆéƒ½æ˜¯å®Œå…¨é€šç”¨çš„**ã€‚



#### 2.Inventory UI åˆ¶ä½œèƒŒåŒ…çš„åŸºæœ¬UI

- å¯¼å…¥ç´ æè®¾ç½®ç”»å¸ƒå¸ƒå±€
- ä½¿ç”¨ Grid Layout Group è¿›è¡Œç½‘æ ¼åŒ–æ§åˆ¶
- ä¿å­˜ Slot Holder ä¸º Prefab

<img src="./assets/image-20250610165332742.png" alt="image-20250610165332742" style="zoom:80%;" />



#### 3.Item OnWorld åˆ›å»ºä¸–ç•Œåœ°å›¾ä¸Šçš„ç‰©å“

- åˆ¶ä½œä¸–ç•Œåœ°å›¾ç‰©å“çš„ prefab
- åˆ›å»º ItemPickUp è„šæœ¬åˆ¤æ–­ç¢°æ’
- åˆ›å»º ItemData_SO åˆ¶ä½œç‰©å“ä¿¡æ¯çš„æ¨¡ç‰ˆ
- åœ¨ MouseManager ä¸­æ·»åŠ å¯¹ç‰©å“äº’åŠ¨çš„æŒ‡é’ˆåˆ‡æ¢å’Œç§»åŠ¨

<img src="./assets/image-20250611085351854.png" alt="image-20250611085351854" style="zoom:80%;" />



#### 4.Equip Weapon è£…å¤‡æ­¦å™¨

- åœ¨ä¸–ç•Œåœ°å›¾ä¸Šåˆ›å»ºæ­¦å™¨ æ·»åŠ å¿…è¦å¯¹ Component 
- åˆ›å»ºæ­¦å™¨æœ¬èº«çš„ Attack Data æ”»å‡»å±æ€§
- è°ƒæ•´ä¸–ç•Œç‰©å“çš„ç¢°æ’å™¨å’Œè§¦å‘å™¨
- è°ƒæ•´ç”Ÿæˆç‰©å“çš„ Prefab çš„åæ ‡ï¼Œç‰¹åˆ«æ˜¯æ­¦å™¨å’Œè£…å¤‡
- CharacterStats ä»£ç ä¸­åŠ å…¥ EquipWeapon å®ç°è£…å¤‡æ­¦å™¨
- æ·»åŠ æ­¦å™¨çš„ Attack Data
- AttackData_SO é‡Œæ·»åŠ æ›´æ–°å±æ€§çš„å‡½æ•°

<img src="./assets/image-20250611145445948.png" alt="image-20250611145445948" style="zoom:80%;" />



#### 5.Inventory Data åˆ›å»ºèƒŒåŒ…çš„æ•°æ®åº“

- åˆ›å»º InventoryData_SO ä½œä¸ºä¸åŒèƒŒåŒ…çš„æ•°æ®åº“
- åˆ›å»ºå•ç‹¬çš„ class InventoryItem ç”¨æ¥è®°å½•èƒŒåŒ…é‡Œçš„ç‰©å“å’Œç°æœ‰æ•°é‡
- æ·»åŠ  AddItem æ–¹æ³•å°†ç‰©å“ä¿¡æ¯ä¼ é€’åˆ° List åˆ—è¡¨å½“ä¸­
- ä¿®æ”¹ ItemPickUp å®ç°ç¢°æ’ç‰©ä½“ æ‹¾å–åˆ°èƒŒåŒ…é‡Œ

<img src="./assets/image-20250611154731470.png" alt="image-20250611154731470" style="zoom: 50%;" />



#### 6.Inventory UI è®©èƒŒåŒ…æ˜¾ç¤ºç‰©å“

- æ¢³ç†é€»è¾‘å¹¶åˆ›å»ºä»£ç  ContainerUI / SlotHolder / ItemUI
- ä¿®æ”¹ SlotHolder çš„ Prefab æ·»åŠ ç©ºç‰©ä½“ ItemSlot
- é€å±‚å®Œæˆä»£ç å®ç°èƒŒåŒ…é‡Œæ­£ç¡®æ˜¾ç¤ºç‰©å“å›¾ç‰‡å’Œæ•°é‡

<img src="./assets/image-20250612154337971.png" alt="image-20250612154337971" style="zoom: 80%;" />

p.s. å…³é—­prefabä¸­çš„ç½‘æ ¼Tipsï¼š

<img src="./assets/image-20250617195658806.png" alt="image-20250617195658806" style="zoom:50%;" />



#### 7.Action Bar / Stats è®¾ç½®å¿«æ·æ å’Œä¿¡æ¯é¢æ¿çš„UI

- åˆ›å»ºå¿«æ·æ  Action Bar çš„æŒ‰é’® UI
- åˆ›å»ºäººç‰©ä¿¡æ¯é¢æ¿ UI

<img src="./assets/image-20250612162406954.png" alt="image-20250612162406954" style="zoom:80%;" />



#### 8.Begin Drag å®ç°æ‹–æ‹½ç‰©å“

- åˆ›å»º DragItem å®ç°æ‹–æ‹½åŠŸèƒ½
- ä»‹ç» EventSystems é‡Œçš„æ¥å£
- å®ç°æ‹–æ‹½è·Ÿéšé¼ æ ‡æŒ‡é’ˆ
- åˆ›å»º DragData ç”¨æ¥è®°å½•æ¯ä¸€ä¸ª UI ç‰©å“åŸå§‹æ•°æ®



p.s. åŒæ ·ç±»å‹é‡Œåˆ—è¡¨è¶Šåé¢çš„ä¸œè¥¿æ¸²æŸ“çš„è¶Šè¿Ÿï¼Œç»“æœå°±æ˜¯å‘ˆç°åœ¨æ›´å‰é¢ï¼Œè¦†ç›–æ‰å‰é¢çš„ã€‚



#### 9.Swap Item äº¤æ¢ç‰©å“

- ä½¿ç”¨ EventSystem åˆ¤æ–­æŒ‡é’ˆä½ç½®
- åˆ©ç”¨ RectTransformUtility.RectangleContainsScreenPoint åˆ¤æ–­é¼ æ ‡ä½ç½®æ˜¯å¦åŒ…å«åœ¨æ¯ä¸€ä¸ªæ ¼å­èŒƒå›´å†…
- äº¤æ¢å›¾ç‰‡çš„åŒæ—¶è¦äº¤æ¢çœŸæ˜¯çš„æ•°æ®åˆ—è¡¨æ’åº
- è°ƒæ•´ RectTransform çš„ offset ç¡®ä¿å›¾ç‰‡åœ¨æ­£ç¡®ä½ç½®æ˜¾ç¤º

<img src="./assets/image-20250613091840519.png" alt="image-20250613091840519" style="zoom:80%;" />



#### 10.Change Weapon å®ç°åˆ‡æ¢æ­¦å™¨

- åœ¨ MouseManager æ·»åŠ å‡½æ•°æ–¹æ³• é¿å… UI äº’åŠ¨æ—¶å½±å“äººç‰©æ§åˆ¶
- åœ¨ CharacterStats ä¸­åŠ å…¥ ChangeWeapon çš„æ–¹æ³•
- åœ¨ SlotHolder ä¸­åˆ‡æ¢æ‰€å±èƒŒåŒ…çš„æ•°æ®åº“
- DragItem ä¸­æ·»åŠ ç‰©å“å±æ€§å’Œ SlotType çš„åŒ¹é…

<img src="./assets/image-20250613093556733.png" alt="image-20250613093556733" style="zoom:80%;" />

- å¢åŠ shieldç›¸å…³çš„å†…å®¹

<img src="./assets/image-20250613143417963.png" alt="image-20250613143417963" style="zoom:80%;" />

P.S. 

- æ³¨æ„ï¼Œè¿™éƒ¨åˆ†å¼€å§‹ç©çš„æ—¶å€™æœ€å¥½ä»ä¸»èœå•è¿›å…¥ï¼Œå¦åˆ™ä¼šæŠ¥é”™ï¼š`NullReferenceException: Object reference not set to an instance of an object DragItem.SwapItem () (at Assets/Scripts/Inventory/UI/DragItem.cs:89)`

  - åŸå› ï¼šç›´æ¥ä»å½“å‰åœºæ™¯è¿›å…¥ï¼Œç”±äºæ²¡æœ‰åˆå§‹åŒ–èƒŒåŒ…ä¼šæŠ¥é”™ï¼ˆæ‰€ä»¥è¦ä»ä¸»èœå•è¿›å…¥æ¸¸æˆï¼‰ï¼Œå¯ä»¥é€šè¿‡å›¾ç¤ºä»£ç é‡Œçš„Debugéƒ¨åˆ†å®šä½è¯¥é—®é¢˜ã€‚

    ```c#
    public void SwapItem()
        {
            //å¦‚æœç›´æ¥ä»å½“å‰åœºæ™¯è¿›å…¥ï¼Œç”±äºæ²¡æœ‰åˆå§‹åŒ–èƒŒåŒ…ä¼šæŠ¥é”™ï¼ˆæ‰€ä»¥è¦ä»ä¸»èœå•è¿›å…¥æ¸¸æˆï¼‰
            // if (targetSlotHolder.itemUI.Bag == null || currentSlotHolder.itemUI.Bag == null)
            // {
            //     Debug.LogError("My Debug SwapItem: Bag is null in targetSlotHolder or currentSlotHolder!");
            //     return;
            // }
    
            //æ”¹å˜æ•°æ®åº“
            var targetItem = targetSlotHolder.itemUI.Bag.items[targetSlotHolder.itemUI.Index];
            var tempItem = currentSlotHolder.itemUI.Bag.items[currentSlotHolder.itemUI.Index];
    
            bool isSameItem = (tempItem.itemData == targetItem.itemData);
            if (isSameItem && targetItem.itemData.itemStackable)//å åŠ 
            {
                targetItem.itemAmount += tempItem.itemAmount;
                tempItem.itemData = null;
                tempItem.itemAmount = 0;
            }
            else//äº¤æ¢ç‰©å“æ•°æ®
            {
                currentSlotHolder.itemUI.Bag.items[currentSlotHolder.itemUI.Index] = targetItem;
                targetSlotHolder.itemUI.Bag.items[targetSlotHolder.itemUI.Index] = tempItem;
            }
        }
    ```

    

- æ³¨æ„å½“å‰‘/ç›¾ç‰Œä»è£…å¤‡æ ç§»å›åˆ°èƒŒåŒ…é‡ŒåŸæœ‰ç›¾ç‰Œ/å‰‘çš„æ ¼å­æ—¶å€™ä¼šå‘ç”ŸæŠ¥é”™ï¼ˆåŸæ¥ä»£ç ï¼‰: 

  - ä¼šå¯¼è‡´çš„ç»“æœï¼šå°†ä¸¤è€…äº¤æ¢ä½ç½®ï¼Œä½¿å¾—æ­¦å™¨è£…å¤‡åˆ°äº†ç›”ç”²çš„æ ¼å­é‡Œã€‚

    <img src="./assets/image-20250613151920825.png" alt="image-20250613151920825" style="zoom:50%;" />

  - åŸå› ï¼šå½“æŠŠç‰©å“æ¢åˆ°èƒŒåŒ…æ—¶ä¼šæ— æ¡ä»¶åœ°è°ƒç”¨`SwapItem()`ï¼Œè€Œå¦‚æœç›®æ ‡æ§½ä½ä¸­å·²æœ‰ç‰©å“ï¼ˆå¦‚å‰‘æˆ–ç›¾ç‰Œï¼‰ï¼Œ`SwapItem()`ååœ¨ `SlotHolder.UpdateItem` ä¼šè°ƒç”¨ `ChangeArmor`ï¼Œå¯¼è‡´éç›”ç”²ç±»å‹çš„ç‰©å“è¢«é”™è¯¯åœ°ä¼ é€’ç»™ `EquipArmor` æ–¹æ³•ã€‚

    ```c#
    switch (targetSlotHolder.slotType)
                    {
                        case SlotType.BAG:
                            SwapItem();
                            break;
                        case SlotType.WEAPON:
                            if (currentItemUI.Bag.items[currentItemUI.Index].itemData.itemType == ItemType.Weapon)
                                SwapItem();
                            break;
                        case SlotType.ARMOR:
                            if (currentItemUI.Bag.items[currentItemUI.Index].itemData.itemType == ItemType.Armor)
                                SwapItem();
                            break;
                        case SlotType.ACTION:
                            if (currentItemUI.Bag.items[currentItemUI.Index].itemData.itemType == ItemType.Useable)
                                SwapItem();
                            break;
                    }
    ```

  - è§£å†³æ–¹æ³•ï¼šåœ¨`case SlotType.BAG:`ä¸­åŠ å…¥æ¡ä»¶( ç›®æ ‡æ§½ä½ä¸ºç©º æˆ–è€… ç›®æ ‡æ§½ä½ä¸å½“å‰æ§½ä½ç‰©å“ç±»å‹ç›¸åŒ )ã€‚

    ```c#
    case SlotType.BAG:
                            // æ£€æŸ¥ç›®æ ‡æ§½ä½æ˜¯å¦å·²æœ‰ç‰©å“
                            var targetItem = targetSlotHolder.itemUI.Bag.items[targetSlotHolder.itemUI.Index];
                            bool canSwap = targetItem.itemData == null || //ç›®æ ‡æ§½ä½ä¸ºç©º
                                           targetItem.itemData.itemType == currentItemUI.Bag.items[currentItemUI.Index].itemData.itemType;//ç›®æ ‡æ§½ä½ä¸å½“å‰æ§½ä½ç‰©å“ç±»å‹ç›¸åŒ
                            if (canSwap)
                                SwapItem();
                            break;
    ```



#### 11.Useable Item å¯ä½¿ç”¨çš„ç‰©å“

- åˆ›å»ºå¤§è˜‘è‡ å¹¶æ·»åŠ å¿…è¦çš„ç»„ä»¶
- åˆ›å»º UseableItemData_SO åˆ¶ä½œå¯ä½¿ç”¨ç‰©å“çš„å±æ€§æ¨¡ç‰ˆ
- åˆ©ç”¨ IPointerClickHandler æ¥å£å®ç°åŒå‡»ä½¿ç”¨ç‰©å“
- åœ¨ CharacterStats ä¸­æ·»åŠ  ApplyHealthï¼ˆæˆ‘è¿™é‡Œé¢æ˜¯ApplyUseableEffectï¼‰ å®ç°è¡€é‡å˜åŒ–

<img src="./assets/image-20250613172937326.png" alt="image-20250613172937326" style="zoom:80%;" />



#### 12.Action Button å¿«æ·æ æŒ‰é”®

- æ·»åŠ å®ç° CloseBtn å…³é—­å½“å‰ UI é¢æ¿
- æ·»åŠ æŒ‰é”®æ§åˆ¶æ‰“å¼€å…³é—­ UI é¢æ¿
- åˆ›å»º ActionButton è„šæœ¬è®¾ç½®ç‹¬ç«‹æŒ‰é”®ä½¿ç”¨å¿«æ·æ ç‰©å“
- ä¿®æ­£åŒå‡»ç©º SlotHolder çš„æŠ¥é”™

<img src="./assets/image-20250613191623288.png" alt="image-20250613191623288" style="zoom:80%;" />



#### 13.Stats Info æ˜¾ç¤º Player ç›¸å…³ä¿¡æ¯

- åˆ›å»º RawImage å’Œ ç‹¬ç«‹ Camera å®ç°æ˜ å°„ Player çš„æ¨¡å‹
- è·å¾— Text çš„é¢æ¿ä¿¡æ¯
- åˆ›å»ºå‡½æ•°æ–¹æ³•å®æ—¶æ›´æ–°é¢æ¿ä¿¡æ¯

<img src="./assets/image-20250615101909695.png" alt="image-20250615101909695" style="zoom:80%;" />

å°Tips

- åŠ å…¥cameraç”¨äºç”Ÿæˆraw imageåï¼Œæ¸¸æˆæ—¶å¯èƒ½ç”»é¢å˜å¾—å¾ˆæ¨¡ç³Š

  <img src="./assets/image-20250613203225684.png" alt="image-20250613203225684" style="zoom:50%;" />

  - åŸå› ï¼šä¸ç¡®å®šæ˜¯ä»€ä¹ˆé—®é¢˜ã€‚
  
  - è§£å†³æ–¹æ³•ï¼šå°±åœ¨äººç‰©é¢æ¿æ‰“å¼€æ—¶å¯ç”¨cameraï¼Œå…³é—­æ—¶å…³é—­cameraã€‚
  
    ```c#
    //InventoryManager.csä¸­
    void Update()
        {
            if (Input.GetKeyDown(KeyCode.B)) // æŒ‰ä¸‹Bé”®æ‰“å¼€æˆ–å…³é—­èƒŒåŒ…æ 
            {
                isOpen = !isOpen;
                inventoryPanel.SetActive(isOpen); // åˆ‡æ¢èƒŒåŒ…æ UIé¢æ¿çš„æ˜¾ç¤ºçŠ¶æ€
                statsPanel.SetActive(isOpen); // åˆ‡æ¢è£…å¤‡æ UIé¢æ¿çš„æ˜¾ç¤ºçŠ¶æ€
            }
    
            // æ§åˆ¶äººç‰©é¢æ¿çš„ç›¸æœºå¼€å…³
            if (GameManager.Instance.characterPanelCamera != null)
                GameManager.Instance.characterPanelCamera.gameObject.SetActive(isOpen);
            else
                Debug.LogWarning("My_Debug : Character panel camera is not assigned in GameManager.");
    
    
            // æ›´æ–°è§’è‰²äººç‰©æ å±æ€§æ–‡æœ¬
            UpdateStatsText(
                GameManager.Instance.playerStats.CurrentHealth,
                GameManager.Instance.playerStats.attackData.minDamage,
                GameManager.Instance.playerStats.attackData.maxDamage,
                GameManager.Instance.playerStats.CurrentDefence
            );
        }
    ```
  
    ```c#
    //GameManager.csä¸­
    public Camera characterPanelCamera; // ç”¨äºäººç‰©é¢æ¿çš„ç›¸æœº
    
        List<IEndGameObserver> endGameObservers = new List<IEndGameObserver>();
    
        protected override void Awake()
        {
            base.Awake();
            DontDestroyOnLoad(gameObject); // ç¡®ä¿GameManageråœ¨åœºæ™¯åˆ‡æ¢æ—¶ä¸ä¼šè¢«é”€æ¯
        }
    
        public void RigisterPlayer(CharacterStats player)
        {
            playerStats = player;
            characterPanelCamera = playerStats.transform.Find("Camera").GetComponent<Camera>(); // è·å–è§’è‰²çš„Cameraç»„ä»¶
    ```
  
    <img src="./assets/image-20250624092250883.png" alt="image-20250624092250883" style="zoom:50%;" />
  
    

#### 14.Change Animator åˆ‡æ¢åŠ¨ç”»æ§åˆ¶å™¨

- ä½¿ç”¨æ›´å¤šåŠ¨ç”»æ¥åˆ›å»º Animator override controller
- ItemData_SO ä¸­æ·»åŠ æ­¦å™¨é…å¥—åŠ¨ç”»æ§åˆ¶å™¨
- åœ¨ EquipWeapon å’Œ UnEquipment ä¸­æ·»åŠ ä»£ç åˆ‡æ¢æ­¦å™¨ä¼´éšåŠ¨ç”»

å‚è€ƒç´ æï¼š

- RPG Character Animation Pack Free ï¼š[ç‚¹å‡»è·³è½¬](https://assetstore.unity.com/packages/3d/animations/rpg-character-mecanim-animation-pack-free-65284)

<img src="./assets/image-20250616090107508.png" alt="image-20250616090107508" style="zoom:50%;" /><img src="./assets/image-20250616090050274.png" alt="image-20250616090050274" style="zoom:50%;" />

fix problems:

-  åŸæ¥è§†é¢‘é‡Œçš„`attackData`ä¸`baseAttackData`çš„é€»è¾‘æœ‰ç‚¹é—®é¢˜,ä¼šå¯¼è‡´æ¨¡æ¿çš„æ•°æ®è¢«ä¿®æ”¹ï¼š

  - ä¿®æ”¹ï¼Œæ”¹åï¼Œå¹¶æŠŠcharacteréƒ¨åˆ†å¯¹åº”çš„prefabçš„attack Dataçš„å†…å®¹æ”¹ä¸ºç»™templateAttackDataèµ‹å€¼ï¼Œåˆ æ‰å¯¹attackDataçš„èµ‹å€¼

      public **AttackData_SO** templateAttackData; *// æ”»å‡»templateæ•°æ®*

      public **AttackData_SO** attackData; *// æ”»å‡»æ•°æ®*



#### 15.Item Tooltip ç‰©å“ä¿¡æ¯æ˜¾ç¤ºæ 

- åˆ›å»º UI
- å­¦ä¹  Content size fitter çš„ç”¨æ³•å®ç°è‡ªåŠ¨æ‹‰ä¼¸ç¼©æ”¾
- æ·»åŠ ä»£ç è„šæœ¬ ItemTooltip 
- åˆ©ç”¨ IPointEnterHandler æ¥å£å®ç°é¼ æ ‡æ‚¬åœæ˜¾ç¤º Tooltip
- RectTransform.GetWorldCorners æ¦‚å¿µè¯´æ˜åŠä½¿ç”¨æ–¹æ³•

<img src="./assets/image-20250616162446608.png" alt="image-20250616162446608" style="zoom:80%;" />



#### 16.Loot Items æ‰è½ç‰©å“

- åˆ›å»º LootItem ç±» è®°å½•è¦æ‰è½çš„ç‰©å“å’Œæƒé‡
- ä½¿ç”¨ [Range] æ§åˆ¶æ‰è½æƒé‡çš„ç™¾åˆ†æ¯”
- å®ç°å¤šç‰©å“æ¯”è¾ƒæƒé‡æ‰è½



#### 17.Complete Inventory å®ŒæˆèƒŒåŒ…

- æ·»åŠ èƒŒåŒ…çš„ä¿å­˜å’Œè¯»å–æ–¹æ³•
- æ·»åŠ  DragPanel å®ç°æ‹–æ‹½èƒŒåŒ…é¢æ¿
- åˆ©ç”¨è°ƒæ•´ Hierarchy æ’åºçš„æ–¹æ³•æ”¹å˜æ¸²æŸ“å‰åå±‚çº§

<img src="./assets/image-20250616223417833.png" alt="image-20250616223417833" style="zoom:80%;" />



fix problems:

- ä»æ¸¸æˆå›åˆ°ä¸»èœå•ï¼Œå¿«æ·æ ï¼Œè£…å¤‡æ ç­‰ä»æ˜¯å¼€ç€çš„ï¼š

  - é—®é¢˜åŸå› ï¼š`DontDestroyOnLoad(gameObject);` ä¸æ˜¯åœ¨æ‰€æœ‰Singletoné‡Œé¢éƒ½ä¸è¦åˆ é™¤çš„ï¼Œå¦åˆ™å¿«æ·æ çš„æ˜¾ç¤ºçŠ¶æ€æ²¡æœ‰åœ¨åˆ‡æ¢åœºæ™¯æ—¶è¢«é‡ç½®ï¼Œå®ƒä¼šä¿æŒä¹‹å‰çš„çŠ¶æ€ï¼ˆä¾‹å¦‚æ‰“å¼€çŠ¶æ€ï¼‰ã€‚

  - è§£å†³æ–¹æ¡ˆï¼š

    - åˆ é™¤Singletoné‡Œçš„`DontDestroyOnLoad(gameObject);`

    - åœ¨ä¸‹è¿°**ä½¿ç”¨Singletonçš„éƒ¨åˆ†Awake()**ä¸­è¿›è¡Œoverride

      - 1ã€**å•ä¾‹ç®¡ç†å™¨ç±»**ï¼ˆç®¡ç†å…¨å±€çŠ¶æ€æˆ–æ•°æ®çš„å•ä¾‹ç±»ï¼‰ï¼š`GameManager.cs` , `MouseManager.cs` , `SaveManager.cs` , `SceneController.cs`ã€‚
      - 2ã€**ç©å®¶æ•°æ®æˆ–çŠ¶æ€**ï¼ˆç©å®¶æ•°æ®ï¼ˆå¦‚ç”Ÿå‘½å€¼ã€ç»éªŒå€¼ã€è£…å¤‡ç­‰ï¼‰éœ€è¦åœ¨åœºæ™¯åˆ‡æ¢æ—¶ä¿æŒä¸€è‡´ï¼‰ã€‚

      ```C#
      protected override void Awake()
          {
              base.Awake();
              DontDestroyOnLoad(gameObject);
          }
      ```

- å¦‚æœä¸è¿›å…¥ä¸‹ä¸€åœºæ™¯ç›´æ¥escåï¼Œä½¿ç”¨continueä¼šå‘ç°æ•°æ®éƒ½æ²¡äº†ï¼š

  - SaveManager.csé‡Œescæ—¶è¦åŠ å…¥äººç‰©æ•°æ®ä¸èƒŒåŒ…æ•°æ®çš„ä¿å­˜ï¼Œä½¿å¾—continueæ—¶èƒ½å¤ŸåŠ è½½å¾—åˆ°ã€‚

    ```c#
    if (Input.GetKeyDown(KeyCode.Escape))
            {
                // Exit the game when 'Escape' is pressed
    
                SaveManager.Instance.SavePlayerData();  // ä¿å­˜ç©å®¶æ•°æ®
                InventoryManager.Instance.SaveData();   // ä¿å­˜èƒŒåŒ…å’Œè£…å¤‡æ æ•°æ®
    
                SceneController.Instance.TransitionToMainMenu();
            }
    ```



#### 18.åˆ¶ä½œ3Dæ­¦å™¨ åŠ åœ¨æ¸¸æˆä¸­çš„ä½¿ç”¨

- ProBuilder å»ºæ¨¡ä»‹ç»
- UV Editor ç¼–è¾‘å™¨ä½¿ç”¨

<img src="./assets/image-20250617130538246.png" alt="image-20250617130538246" style="zoom:50%;" />

â€‹			<img src="./assets/weapon_madebyQbdl_ori.png" alt="weapon_madebyQbdl_ori" style="zoom: 33%;" /><img src="./assets/weapon_madebyQbdl.png" alt="weapon_madebyQbdl" style="zoom:33%;" />

<img src="./assets/image-20250617162257750.png" alt="image-20250617162257750" style="zoom: 50%;" />

- å°†BroadSwordè¿™æŠŠå‰‘ä»¥ç±»ä¼¼swordçš„æ–¹å¼å¯¹å®ƒæ·»åŠ å„ç§å±æ€§ä¸æ–‡ä»¶



- å°è¯•åˆ¶ä½œè‡ªå·±çš„åŒæ‰‹æ­¦å™¨åŠ¨ç”»â€”â€”æˆ‘è¿™é‡Œåšçš„è¿˜æ˜¯å•æ‰‹æ¨¡å‹
- æµ‹è¯•ä½ çš„äººç‰©æ¨¡å‹æ˜¯å¦æœ‰é—®é¢˜å†åšè°ƒæ•´
- åå¤è°ƒæ•´åæ ‡åŠæ—‹è½¬å¹¶ä¸”é…åˆåŠ¨ç”»æ£€æŸ¥

<img src="./assets/image-20250617210611396.png" alt="image-20250617210611396" style="zoom:80%;" />

fix problems:

- ä¿®æ”¹è˜‘è‡æ¼‚æµ®åœ¨ç©ºä¸­çš„é—®é¢˜ï¼šè°ƒæ•´mushroomçš„prefabä¸­capsule colliderä¸box colliderçš„å¤§å°

  <img src="./assets/image-20250617213611979.png" alt="image-20250617213611979" style="zoom: 50%;" />



### ç« èŠ‚2 å¯¹è¯ç³»ç»Ÿ

#### 1.é¡¹ç›®ä»‹ç»

å¯¹è¯ç³»ç»Ÿçš„é€»è¾‘ã€æ•°æ®ã€UIç›¸å…³åˆ¶ä½œã€‚



#### 2.Dialogue Logic å¯¹è¯ç³»ç»Ÿçš„é€»è¾‘

- é€»è¾‘è®²è§£
- åˆ›å»ºä»£ç  DialogueData_SO / Dialogue Piece / Dialogue Option
- åˆ›å»ºç¬¬ä¸€ä¸ªå¯¹è¯å®ç°é¢„æœŸçš„é€»è¾‘



#### 3.Dialogue Canvas å¯¹è¯çš„UIé¢æ¿è®¾ç½®

- åˆ›å»ºå¯¹è¯çª—å£çš„ UI å¸ƒå±€
- ç»§ç»­ç†Ÿæ‚‰å„ç§ Layout Group çš„ç”¨æ³•
- åˆ©ç”¨ Layout Element è®¾ç½®æœ€å°é«˜åº¦
- è‡ªå·±å¤šåŠ¨æ‰‹å°è¯•åˆ¶ä½œè‡ªå·±å–œæ¬¢çš„æ ·å¼

<img src="./assets/image-20250624155106151.png" alt="image-20250624155106151" style="zoom: 70%;" />



#### 4.åˆ›å»ºå¯¹è¯&ä»»åŠ¡çš„ NPC

- åœ¨ Assets Store ä¸­æ·»åŠ rpg-hero-pbr-hp-polyartç´ æï¼š[ç‚¹å‡»è·³è½¬](https://assetstore.unity.com/packages/3d/characters/humanoids/fantasy/rpg-hero-pbr-hp-polyart-121480)
- å¯¼å…¥ç´ æåï¼Œè¦å°†ä½ çš„åœºæ™¯ç´ æå‡çº§åˆ°URP
- æ‹–æ‹½ç´ æåŒ…ä¸­çš„ Prefab æ–‡ä»¶å¤¹ä¸­çš„äººç‰©æ”¾åœ¨åœºæ™¯ä¸­
- æ·»åŠ åŸºæœ¬çš„å¿…è¦ç»„ä»¶

- è‡ªå·±å•ç‹¬åˆ›å»º Animator Controller åªæ·»åŠ ä¸€ä¸ª Idle åŠ¨ç”»å³å¯
- ä¿®æ”¹ Tag åŠ Layer
- å°†è¿™ä¸ªäººç‰©ä¿å­˜æˆ Original Prefab åœ¨ä½ çš„æ–‡ä»¶å¤¹ä¸­

<img src="./assets/image-20250624163636511.png" alt="image-20250624163636511" style="zoom:70%;" />



#### 5.Update Main Dialogue æ˜¾ç¤ºä¸»å¯¹è¯çª—å£çš„å†…å®¹

- NPC æ·»åŠ  DialogueController è„šæœ¬ å‡ºå‘å¯åŠ¨å¯¹è¯
- åˆ›å»º DialogueUI ä½œä¸ºæ•´ä¸ªå¯¹è¯çš„æ§åˆ¶
- DOTween ä¸­ DOText çš„ç”¨æ³•
- DialogueData_SO ä¼˜åŒ– Text çš„æ˜¾ç¤º [TextArea]

Assets Store å•†åŸ DOTween æ’ä»¶ï¼š[ç‚¹å‡»è·³è½¬](https://assetstore.unity.com/packages/tools/animation/dotween-hotween-v2-27676)

<img src="./assets/image-20250625083700754.png" alt="image-20250625083700754" style="zoom:70%;" />



#### 6.OptionUI åˆ›å»ºé€‰é¡¹å†…å®¹

- OptionUI æ§åˆ¶æ¯ä¸€ä¸ªé€‰é¡¹çš„æ˜¾ç¤ºå†…å®¹
- DialogueData_SO æ·»åŠ å­—å…¸ä¿å­˜æ¯ä¸€æ¡ DialoguePiece å’Œ æœ¬èº«çš„ ID ç”¨æ¥æŸ¥æ‰¾
- å®ç°ç‚¹æŒ‰ Option Button è·³è½¬å¯¹åº”å¯¹è¯

<img src="./assets/image-20250625092720494.png" alt="image-20250625092720494" style="zoom:70%;" />



### ç« èŠ‚3 å¯¹è¯ç³»ç»Ÿ

ä»»åŠ¡æ•°æ®ã€é€»è¾‘ã€UIçš„åˆ¶ä½œï¼ŒåŒ…æ‹¬æ¥å—å¥–åŠ±ã€‚

#### 1.Quest Data åˆ›å»ºä»»åŠ¡æ•°æ®

- åˆ›å»ºä»»åŠ¡åŸºæœ¬å˜é‡
- åˆ›å»º QuestRequire ç”¨æ¥è¿½è¸ªæˆ‘ä»¬è¦å®Œæˆçš„ä»»åŠ¡ç›®æ ‡
- åœ¨ DialoguePiece ä¸­åŠ å…¥ Quest å¹¶è®¾ç½®ä¸€ä¸ªæ–°å¯¹è¯å¯ä»¥æ¥å—ä»»åŠ¡



å°Tips:  

- â€œæ‰‹â€å›¾æ ‡ç‚¹å‡»éšè—å¯ä»¥é˜²æ­¢åœ¨sceneçª—å£ä¸­é€‰ä¸­è¯¥å†…å®¹ã€‚

<img src="./assets/image-20250625103359199.png" alt="image-20250625103359199" style="zoom:80%;" />

- **DontDestroyOnLoad è¦æ±‚å…¶ä¸Šæ²¡æœ‰çˆ¶ç‰©ä½“**ï¼Œæ‰€ä»¥Managersç±»åˆ«ä¸èƒ½æ”¾åœ¨â€œ---- Managers ----â€é‡Œå»ã€‚



#### 2.TakeQuest æ¥å—ä»»åŠ¡

- åˆ›å»º QuestManager ç®¡ç† Player æ¥åˆ°çš„ä»»åŠ¡
- åˆ›å»º class QuestTask ä¿ç®¡æ¥åˆ°çš„æ–°ä»»åŠ¡
- ä½¿ç”¨ System.Linq æ¥æŸ¥æ‰¾å’Œè¿”å› tasks åˆ—è¡¨é‡Œæˆ‘ä»¬æŒ‡å®šæ¡ä»¶çš„æ•°æ®
- å®ç°å¯¹è¯é€‰æ‹©æŒ‡å®šçš„é€‰é¡¹åæ¥å—ä»»åŠ¡

å‚è€ƒå†…å®¹ï¼š

- System.Linq å¾®è½¯æ‰‹å†Œï¼š[è·³è½¬é“¾æ¥](https://docs.microsoft.com/zh-cn/dotnet/csharp/programming-guide/concepts/linq/basic-linq-query-operations)

<img src="./assets/image-20250625110849554.png" alt="image-20250625110849554" style="zoom:80%;" />



#### 3.Quest UI åˆ›å»ºä»»åŠ¡ UI é¢æ¿

- åˆ›å»º Quest Canvas ä½¿ç”¨ä¹‹å‰å­¦ä¹ è¿‡çš„ç»„ä»¶åˆ›å»ºä»»åŠ¡ä¿¡æ¯é¢æ¿
- QuestData_SO ä¸­æ·»åŠ å¥–åŠ±åˆ—è¡¨ rewards

<img src="./assets/image-20250625150028792.png" alt="image-20250625150028792" style="zoom:70%;" />



#### 4.Setup Variables åˆ›å»ºæ‰€éœ€è¦çš„å˜é‡

- åˆ›å»º QuestNameButton æ·»åŠ åœ¨ ä»»åŠ¡åå­—æŒ‰é’® ä¸Š
- åˆ›å»º QuestRequirement æ·»åŠ åœ¨ Requirement ä¸Š
- è®¾ç½®å¥½ä»¥ä¸Šä¸¤ä¸ªç±»çš„å˜é‡å¹¶ä¸”æ‹¿åˆ°èµ‹å€¼
- QuestUI ä¸­åˆ›å»ºæ‰€æœ‰çš„éœ€è¦æ§åˆ¶çš„å˜é‡ / åæ ‡ / Prefab



#### 5.QuestNameButton å®ç°ç‚¹æŒ‰ä»»åŠ¡æ˜¾ç¤ºä¿¡æ¯

- æŒ‰ç…§é€»è¾‘å»å†™æ¯ä¸€ä¸ªéœ€è¦çš„å‡½æ•°æ–¹æ³•
- è®¾ç½®ä»»åŠ¡æŒ‰é’®æ˜¾ç¤ºå¯¹åº”ä»»åŠ¡åå­—
- å®ç°ç‚¹å‡»åå­—æŒ‰é’®èƒ½æ˜¾ç¤ºä»»åŠ¡è¯¦æƒ…ä»¥åŠä»»åŠ¡éœ€æ±‚
- è°ƒæ•´ UI å¸ƒå±€

<img src="./assets/image-20250626091010511.png" alt="image-20250626091010511" style="zoom:70%;" />

Fix a problem : ä¹‹å‰æŒ‚è½½çš„ä¸æ˜¯çˆ¶ç‰©ä½“ï¼ŒæŒ‚é”™äº†

<img src="./assets/image-20250626084445926.png" alt="image-20250626084445926" style="zoom:50%;" />



#### 6.RewardList å¥–åŠ±ç‰©å“çš„æ˜¾ç¤º

- SetupRewardListçš„ æ–¹æ³•å®ç°
- åˆ›å»º ShowTooltip å®ç°é¼ æ ‡æ»‘å…¥æ˜¾ç¤ºä¿¡æ¯
- åˆ›å»ºå¤šä¸ªä»»åŠ¡å¹¶ä¿®å¤é‡å¤æ˜¾ç¤ºä»»åŠ¡å¥–åŠ±çš„é—®é¢˜

<img src="./assets/image-20250626095650259.png" alt="image-20250626095650259" style="zoom:70%;" />



#### 7.UpdateQuestProgress æ›´æ–°ä»»åŠ¡è¿›åº¦

- åˆ›å»ºå‡½æ•°åœ¨ æ•Œäººæ­»äº¡ å’Œ æ‹¾å–ç‰©å“æ—¶ æ›´æ–°ä»»åŠ¡è¿›åº¦
- ä½¿ç”¨ Linq è¯­å¥ä¸­çš„ Where æ‰¾åˆ°åŒ¹é…çš„ä»»åŠ¡éœ€æ±‚å¹¶æ£€æŸ¥æ˜¯å¦æ»¡è¶³
- ä¿®æ”¹ç‰¹æ®Šæƒ…å†µä½¿ç”¨ä»»åŠ¡ç‰©å“æ¶ˆè€—åæ›´æ–°è¿›åº¦

<img src="./assets/image-20250626102035046.png" alt="image-20250626102035046" style="zoom:70%;" />



#### 8.CheckQuestItem æ¥å—ä»»åŠ¡æ—¶æ£€æŸ¥ä»»åŠ¡ç‰©å“

- è€ƒè™‘å¯èƒ½å­˜åœ¨çš„æƒ…å†µåœ¨æ¥å—ä»»åŠ¡çš„æ—¶å€™æ£€æŸ¥èƒŒåŒ…æ˜¯å¦æœ‰ä»»åŠ¡ç‰©å“
- åœ¨ QuestData_SO ä¸­åˆ›å»º RequireTargetName æ‹¿åˆ°éœ€æ±‚çš„åå­—åˆ—è¡¨
- å¾ªç¯åˆ—è¡¨ä¸­æ¯ä¸€é¡¹åœ¨ Inventory ä¸­æ£€æŸ¥æ˜¯å¦å­˜åœ¨å¹¶æ›´æ–°æ•°æ®

<img src="./assets/image-20250626105229534.png" alt="image-20250626105229534" style="zoom:70%;" />



#### 9.QuestGiver æ§åˆ¶ä»»åŠ¡å¯¹è¯æ˜¾ç¤º

- åˆ›å»º QuestGiver å®ç°æ ¹æ®ä»»åŠ¡çŠ¶æ€åˆ‡æ¢NPCå¯¹è¯ä¿¡æ¯
- åˆ›å»ºå¤šä¸ª Dialogue Data ç¼–å†™æ•´ä¸ªä»»åŠ¡æµç¨‹å¯¹è¯
- Dialogue Controller ä¸­æ·»åŠ  OnTriggerExit äººç‰©è„±ç¦»èŒƒå›´å…³é—­å¯¹è¯æ¡†

<img src="./assets/image-20250626113632764.png" alt="image-20250626113632764" style="zoom:70%;" />



#### 10.GiveRewards æ‹¿åˆ°ä»»åŠ¡å¥–åŠ±

- InventoryManager ä¸­æ·»åŠ æ£€æŸ¥ä»»åŠ¡ç‰©å“æ•°é‡
- è€ƒè™‘å¯èƒ½å‡ºç°çš„æ‰€æœ‰æƒ…å†µå®ç°ä¸Šäº¤ä»»åŠ¡ç‰©å“å®Œæˆä»»åŠ¡
- ItemUI è°ƒæ•´å¯¹ä»»åŠ¡é¢æ¿çš„è´Ÿæ•°ç‰©å“ç°å®é—®é¢˜
- å®ç°ä»»åŠ¡ Finish ä¹‹åä»»åŠ¡é¢æ¿éœ€æ±‚çš„æ–‡å­—æ”¹å˜

<img src="./assets/image-20250626152028662.png" alt="image-20250626152028662" style="zoom:70%;" />

- æ·»åŠ ä¸€ä¸ªæ–°çš„ NPC
- è®¾ç½®æ–°çš„å¯¹è¯ä¿¡æ¯å’Œæ–°çš„ä»»åŠ¡
- ä¹Ÿä¸ºå¯¹è¯æ·»åŠ å›¾ç‰‡ å¤´åƒ / ä»»åŠ¡ç‰©å“ ç­‰
- å‘æŒ¥åˆ›æ„è®¾ç½®ä»»åŠ¡å¹¶å®Œæˆæµ‹è¯•æ¸¸æˆ

<img src="./assets/image-20250626171551515.png" alt="image-20250626171551515" style="zoom:70%;" />

<img src="./assets/image-20250627110121020.png" alt="image-20250627110121020" style="zoom:70%;" />



P.S.

- æˆ‘è¿™é‡Œä½¿ç”¨äº†Battle Wizard Poly Artï¼š[è·³è½¬é“¾æ¥](https://assetstore.unity.com/packages/3d/characters/humanoids/fantasy/battle-wizard-poly-art-128097)  &  RPG Tiny Hero Duo PBR Polyartï¼š [è·³è½¬é“¾æ¥](https://assetstore.unity.com/packages/3d/characters/humanoids/rpg-tiny-hero-duo-pbr-polyart-225148)

  â€‹				<img src="./assets/image-20250626161556598.png" alt="image-20250626161556598" style="zoom: 50%;" /><img src="./assets/image-20250626182338307.png" alt="image-20250626182338307" style="zoom:50%;" />

- åŒæ—¶è¡¥ä¸Šäº†ä¹‹å‰NPC_Heroé‡Œçš„idleåŠ¨ç”»ï¼Œä¹‹å‰æ²¡æŒ‚è½½åŠ¨ç”»ã€‚

- å¢åŠ ä»»åŠ¡çš„äººç‰©å›¾æ ‡ã€‚

- åŠ å…¥æ–°çš„æ­¦å™¨å¹¶å°†å¯¹åº”player prefabéª¨éª¼ä½ç½®Weaponä¿®æ”¹ï¼ˆä¹‹å‰ä¼¼ä¹æ²¡æœ‰æ”¹ï¼‰ã€‚

  - è¿™é‡Œä½¿ç”¨çš„ç´ ææ˜¯FREE - Low Poly Swords - RPG Weaponsï¼š[è·³è½¬é“¾æ¥](https://assetstore.unity.com/packages/3d/props/weapons/free-low-poly-swords-rpg-weapons-198166)

  <img src="./assets/image-20250627105718527.png" alt="image-20250627105718527" style="zoom:80%;" />



#### 11.SaveQuestManager ä¿å­˜ä»»åŠ¡æ•°æ®

- å¾ªç¯æ¯ä¸€ä¸ª QuestTask ä¿å­˜ QuestData
- MouseManager ä¸­åšä¸€äº›å°è°ƒæ•´è®©é¼ æ ‡æŒ‡é’ˆåœ¨ UI é¢æ¿é‡Œä¿æŒä¸å˜
- æµ‹è¯•æ¸¸æˆä¿å­˜æ•°æ®å’ŒåŠ è½½æ•°æ®

<img src="./assets/image-20250627155743291.png" alt="image-20250627155743291" style="zoom:70%;" />



### ç« èŠ‚4 ç¼–è¾‘å™¨æ‰©å±•

#### 1.Editor Script è‡ªå·±å†™ä¸€ä¸ªæ’ä»¶å‡ºæ¥

- å®ç°ç”Ÿæˆçª—å£
- å®ç° Inspector çª—å£ç»˜åˆ¶æŒ‰é’®ç‚¹å‡»æ‰“å¼€çª—å£
- å®ç°åŒå‡»å¯¹è¯æ–‡ä»¶æ‰“å¼€çª—å£

<img src="./assets/image-20250627193411506.png" alt="image-20250627193411506" style="zoom: 50%;" />

- äº†è§£åŸºæœ¬çš„ GUILayout ç”¨æ³•
- å°è¯•åˆ›å»º ReorderableList åˆ—è¡¨
- äº†è§£ç†Ÿæ‚‰ Rect çš„ç”¨æ³•ç»˜åˆ¶ä¸€äº›å˜é‡

<img src="./assets/image-20250627205253830.png" alt="image-20250627205253830" style="zoom:50%;" />

- å°è¯•ç”»å‡º OptionList

- ä½¿ç”¨å­—å…¸è®°å½•ç»‘å®šæ¯ä¸€æ¡å¯¹è¯ä¸­çš„é€‰é¡¹åˆ—è¡¨

- è°ƒæ•´è‡ªé€‚åº”é«˜åº¦

  <img src="./assets/image-20250628080110785.png" alt="image-20250628080110785" style="zoom:50%;" />

- ç»˜åˆ¶ ScrollView å®ç°æ»‘åŠ¨æ¡

- äº†è§£ OnSelectionChanged çš„ç”¨æ³•åˆ‡æ¢æ•°æ®æ˜¾ç¤º

- ä½¿ç”¨ EditorUtility.SetDirty å®ç°ä¿å­˜ç¼–è¾‘å™¨ä¸­çš„æ•°æ®æ›´æ”¹

  <img src="./assets/image-20250628082645865.png" alt="image-20250628082645865" style="zoom:50%;" />



## ä¸€äº›ä¼˜åŒ–

### 1ã€åœºæ™¯å…ƒç´ ä¸°å¯Œ

#### 1.1 å¢åŠ æ›´å¤šçš„ä¼ é€é—¨

<img src="./assets/image-20250628122103444.png" alt="image-20250628122103444" style="zoom:70%;" />

â€‹	åŒæ—¶è°ƒæ•´äº†æ™¯æ·±ä¸é›¾åŒ–æ•ˆæœã€‚

â€‹	å‡çº§äº†éƒ¨åˆ†ä¼ é€é—¨

<img src="./assets/image-20250701200125186.png" alt="image-20250701200125186" style="zoom:50%;" />

<img src="./assets/image-20250701200231408.png" alt="image-20250701200231408" style="zoom:50%;" />

#### 1.2 å¢åŠ ç«æŠ€åœºéƒ¨åˆ†

<img src="./assets/image-20250629213712246.png" alt="image-20250629213712246" style="zoom:50%;" />

#### 1.3 å¢åŠ å‰‘é˜µéƒ¨åˆ†

<img src="./assets/image-20250630205103874.png" alt="image-20250630205103874" style="zoom:80%;" />

#### 1.4 å¢åŠ ç¯å¢ƒæ•ˆæœ

<img src="./assets/image-20250706152943163.png" alt="image-20250706152943163" style="zoom: 60%;" />

<img src="./assets/image-20250706153121655.png" alt="image-20250706153121655" style="zoom:60%;" />



### 2ã€åŠ å…¥æ›´å¤šNPC(å¯¹è¯ï¼ŒåŠ¨ç”»ï¼Œæœ¬èº«æºå¸¦çš„å±æ€§)

æ–°çš„åŠ¨ç”»

äººç‰©åŠ ä¸Šbox ç­‰åŸºç¡€å±æ€§â€”â€”å¯ä»¥è€ƒè™‘ä¸åŠ å…¥rigidbodyï¼Œè¿™æ ·äººç‰©ä¸ä¼šè¢«æ’é£

äººç‰©åŠ å…¥å¯¹è¯ç­‰è„šæœ¬å¹¶æŒ‚è½½

ä¿®æ”¹tagç­‰ï¼ˆå¯¹æ¯”å·²ç»è®¾ç½®å¥½çš„è§’è‰²NPCé¢æ¿ï¼‰



- **2.1 å¢åŠ å±±åº•å®ˆå«**ï¼šæé†’ä¸è¦å¾€å‰

<img src="./assets/image-20250630201550781.png" alt="image-20250630201550781" style="zoom:80%;" />

<img src="./assets/image-20250630202126668.png" alt="image-20250630202126668" style="zoom:80%;" />

- **2.2 å¢åŠ è¾¹ç•Œå®ˆå«**ï¼šæé†’ä¸è¦æ‰è½

<img src="./assets/image-20250630165359086.png" alt="image-20250630165359086" style="zoom: 80%;" />

<img src="./assets/image-20250630165520440.png" alt="image-20250630165520440" style="zoom:80%;" />

- **2.3 å¢åŠ ç«æŠ€åœºNPC**ï¼šæé†’å¯ä»¥è¿›å…¥æŒ‘æˆ˜

<img src="./assets/image-20250630165639960.png" alt="image-20250630165639960" style="zoom:80%;" />

<img src="./assets/image-20250630165705252.png" alt="image-20250630165705252" style="zoom:80%;" />

- **2.4 å¢åŠ ç«æŠ€åœºå†…éƒ¨NPCï¼š** ä¸ç©å®¶ç«æŠ€å¯¹è¯

<img src="./assets/image-20250702155325671.png" alt="image-20250702155325671" style="zoom: 80%;" />

<img src="./assets/image-20250702155402275.png" alt="image-20250702155402275" style="zoom: 80%;" />

- **2.5 å¢åŠ é£é¾™NPC**ï¼šæé†’å¯ä»¥æŒ‘æˆ˜å¦ä¸€åªé£é¾™

<img src="./assets/image-20250630170006583.png" alt="image-20250630170006583" style="zoom:80%;" />

- **2.6 å¢åŠ å…¬ä¸»NPC &  å››å¤§æŠ¤å«**ï¼šä¸å·«å¸ˆè´¤è€…å…·æœ‰ç¾ç»Šï¼Œä¼šæœ‰å…³è”å¯¹è¯

<img src="./assets/image-20250705113423921.png" alt="image-20250705113423921" style="zoom:80%;" />

<img src="./assets/image-20250705113502241.png" alt="image-20250705113502241" style="zoom:80%;" />

<img src="./assets/image-20250705113529156.png" alt="image-20250705113529156" style="zoom:80%;" />

<img src="./assets/image-20250705113600521.png" alt="image-20250705113600521" style="zoom:80%;" />

<img src="./assets/image-20250705113651521.png" alt="image-20250705113651521" style="zoom:80%;" />

**Tips:**

- å¦‚æœæƒ³è¦NPCä¸è¢«äººç‰©æ’é£ï¼Œå°±å¯ä»¥ä¸åŠ å…¥rigidbody,ä½†å¦‚æœåˆæƒ³è¦èƒ½å¤Ÿä¸é™·è¿›åœ°é‡Œ
  - è§£å†³æ–¹æ¡ˆï¼šåœ¨äººç‰©prefabé‡Œé¢åˆ›å»ºä¸€ä¸ªç©ºç‰©ä½“ï¼Œä½ç½®å°±ç½®äºäººç‰©è„šåº•ï¼Œè¿™æ ·åœ¨é€‰ä¸­ç§»åŠ¨æ¨¡å¼åï¼Œç§»åŠ¨æ—¶ï¼ŒæŒ‰ä½Vï¼ˆæŒ‰ä½å³é”®å»æ‰¾é‚£ä¸ªç‚¹ï¼‰å¯ä»¥ä»¤æ•´ä¸ªäººç‰©çš„è¯¥ç‚¹å»å¸é™„é¡¶ç‚¹ã€‚

- .metaçš„ç”¨é€”ï¼š

  | **GUID å†™åœ¨ .meta é‡Œ**     | Unity çš„å¼•ç”¨å…³ç³»ï¼ˆPrefab â†’ æè´¨ã€åœºæ™¯ â†’ é¢„åˆ¶ä½“â€¦ï¼‰éƒ½å­˜å‚¨çš„æ˜¯ **GUID**ã€‚å½“ä½ åœ¨ Project è§†å›¾é‡Œç§»åŠ¨ã€é‡å‘½åæ–‡ä»¶æ—¶ï¼ŒUnity åªæ˜¯åœ¨æ•°æ®åº“é‡ŒæŠŠ *è·¯å¾„ â†â†’ GUID* çš„æ˜ å°„æ”¹äº†ä¸€ä¸‹ã€‚GUID æœ¬èº«æ²¡å˜ï¼Œå…¶ä»–èµ„æºä¾æ—§èƒ½é€šè¿‡ GUID æ‰¾åˆ°å®ƒã€‚ |
  | -------------------------- | ------------------------------------------------------------ |
  | **.meta å¿…é¡»éšæ–‡ä»¶ä¸€èµ·åŠ¨** | å¦‚æœä½ ç§»åŠ¨çš„åªæ˜¯ *.prefab*ï¼Œå´å¿˜äº†å®ƒæ—è¾¹çš„ *.prefab.meta*ï¼ŒUnity ä¼šç»™æ–°ä½ç½®çš„æ–‡ä»¶é‡æ–°ç”Ÿæˆä¸€ä¸ª **æ–°çš„ GUID**ï¼Œ**è¿™æ—¶åŸæ¥çš„å¼•ç”¨å°±â€œæ–­çº¿â€äº†ã€‚** |

  - **ç»“è®ºï¼š**

    > *åœ¨åŒä¸€ä¸ªå·¥ç¨‹é‡Œï¼Œåªè¦ã€Œæ–‡ä»¶ + å¯¹åº” .metaã€ä¸€èµ·æ‹–/å‰ªåˆ‡ï¼Œè·¯å¾„æ€ä¹ˆæ”¹éƒ½ä¸å½±å“å¼•ç”¨ã€‚*

- å°½é‡é¿å…Unityä¸VSCodeåŒæ—¶ä¿®æ”¹ï¼Œæœ‰çš„æ—¶å€™ä¼šå‡ºç°cacheçš„é”™è¯¯ï¼Œå¯¼è‡´æ–‡ä»¶æ›´æ”¹ä¸æƒ³è±¡ä¸ç¬¦ã€‚

- å½“**åªæ˜¯ä½¿ç”¨ç´ æåŒ…é‡Œçš„ä¸€éƒ¨åˆ†æ—¶ï¼Œè¦å»æ‰å…¶ä»–ä¸å¿…è¦çš„å†…å®¹**å´ä¸çŸ¥é“å“ªäº›æœ‰ç”¨æ—¶ï¼š

  1. åœ¨ **Project** é‡Œå¤šé€‰éœ€è¦çš„ Prefab â†’ **å³é”® â–¸ Select Dependencies**
  2. ç‚¹å‡» *Project* å³ä¸Š **ğŸ”’ Padlock** é”å®šå½“å‰é«˜äº®é›†åˆ
  3. æœç´¢æ¡†é‡Œè¾“å…¥ï¼š `t:texture ref:selection` å¹¶æ•² Enter /æˆ–è€…ç›´æ¥çœ‹ä¹Ÿè¡Œï¼ˆåˆ å»æ²¡æœ‰è¢«é€‰ä¸­çš„å†…å®¹å³å¯

  

### 3ã€åŠ å…¥æ›´å¤šæ•Œäºº(åŠ¨ç”»å¸§ä¸­åŠ å…¥å‡½æ•°ï¼Œæœ¬èº«æºå¸¦çš„å±æ€§ï¼Œä¿®æ”¹åŠ¨ç”»æ’­æ”¾é€»è¾‘)

**Key : å‚è€ƒä¹‹å‰æ•Œäººçš„åŠ¨ç”»è®¾è®¡**

â€‹	p.s. 

â€‹	1ã€æ•Œäººèº«ä¸Šå•ç‹¬çš„è„šæœ¬ï¼ˆè‹¥æœ‰ï¼‰æ˜¯ç”¨äºå‡»é£ç­‰æ–°çš„æ”»å‡»æ–¹å¼çš„ï¼Œè€Œä¸æ˜¯ä¼¤å®³è®¡ç®—çš„ï¼ˆè¿™åœ¨åŸºç¡€EnemyControlleré‡Œå°±æœ‰ï¼‰ï¼›

â€‹	2ã€å¦‚æœæ— å‡»é£ç­‰ç‰¹æ®Šæ•ˆæœï¼Œå°±ç›´æ¥åœ¨ä¸¤ä¸ªä¸åŒæ”»å‡»æ–¹å¼çš„Animationsé‡Œæ’å…¥å…³é”®å¸§ï¼ˆéœ€è¦å¤åˆ¶å‡ºæ¥ä¸€ä»½ï¼‰ï¼ŒåŠ å…¥getHit()å³å¯ã€‚



- **3.1 éª¨å¤´æ€ª**

  ä¸å²è±å§†ç±»ä¼¼ï¼Œä»…æ­£å¸¸ä¸æš´å‡»ï¼Œæ— è¿œç¨‹æ”»å‡»ã€‚

  - ç»§æ‰¿slimeï¼ˆä»…è¿‘æˆ˜ä¸æš´å‡»ï¼‰ï¼Œä»…åŠ å…¥å…³é”®å¸§çš„getHit()

  <img src="./assets/image-20250702200924745.png" alt="image-20250702200924745" style="zoom:50%;" />

- **3.2 ç‹¼äºº**

  æœ‰è¿‘æˆ˜ä¸è¿œç¨‹æ”»å‡»ï¼Œæœ‰å‡»é£ã€‚

  - ç»§æ‰¿grunt(å«è¿œç¨‹ä¸è¿‘æˆ˜ï¼‰ï¼ŒåŠ å…¥å…³é”®å¸§çš„getHit()
  - æŒ‚è½½çš„ä»£ç å°†EnemyController.csæ¢æˆGrunt.csâ€”â€”ç”¨äºä½¿ç”¨å‡»é£

  - æ ¹æ®åŠ¨ç”»ä¿®æ”¹skill rangeä¸ºå¯¹åº”çš„æ”»å‡»èŒƒå›´

    <img src="./assets/image-20250702203121639.png" alt="image-20250702203121639" style="zoom: 50%;" />

- **3.3 é›ªäºº**

  ä¸gruntç±»ä¼¼ï¼Œä¸€ä¸ªè¿‘æˆ˜ï¼ˆä¸å¸¦å‡»é£ï¼‰ï¼Œä¸€ä¸ªè¿œç¨‹

  - ç»§æ‰¿grunt(å«è¿œç¨‹ä¸è¿‘æˆ˜ï¼‰ï¼ŒåŠ å…¥å…³é”®å¸§çš„getHit()

  - æ ¹æ®åŠ¨ç”»ä¿®æ”¹skill rangeä¸ºå¯¹åº”çš„æ”»å‡»èŒƒå›´

<img src="./assets/image-20250703081651888.png" alt="image-20250703081651888" style="zoom: 70%;" />

- **3.4 é»‘ç‰›å°†å†›**

  ä¼šæœ‰æ›´è¿œè·ç¦»çš„è¿œç¨‹ï¼ˆå¸¦å‡»é£ï¼‰

  - ç»§æ‰¿grunt(å«è¿œç¨‹ä¸è¿‘æˆ˜ï¼‰ï¼ŒåŠ å…¥å…³é”®å¸§çš„getHit()
  - æŒ‚è½½çš„ä»£ç å°†EnemyController.csæ¢æˆGrunt.csâ€”â€”ç”¨äºä½¿ç”¨å‡»é£

  - æ ¹æ®åŠ¨ç”»ä¿®æ”¹skill rangeä¸ºå¯¹åº”çš„æ”»å‡»èŒƒå›´

<img src="./assets/image-20250703084341690.png" alt="image-20250703084341690" style="zoom:80%;" />

- **3.5 é£é¾™**

  è¿‘æˆ˜ï¼ˆå¸¦å‡»é£ï¼‰ï¼Œè¿œç¨‹

  - ç»§æ‰¿grunt(å«è¿œç¨‹ä¸è¿‘æˆ˜ï¼‰ï¼ŒåŠ å…¥å…³é”®å¸§çš„getHit()

  - æŒ‚è½½çš„ä»£ç å°†EnemyController.csæ¢æˆGrunt.csâ€”â€”ç”¨äºä½¿ç”¨å‡»é£

  - æ ¹æ®åŠ¨ç”»ä¿®æ”¹skill rangeä¸ºå¯¹åº”çš„æ”»å‡»èŒƒå›´

<img src="./assets/image-20250703090408464.png" alt="image-20250703090408464" style="zoom: 50%;" />



### 4ã€äººç‰©ç§»åŠ¨é€Ÿåº¦éšç­‰çº§å˜åŒ–

å¯¹NavMeshAgent çš„speedå‚æ•°è¿›è¡ŒåŠ¨æ€è®¾ç½®ã€‚



### 5ã€å¢åŠ ç›¾å

å®ç°æµç¨‹ï¼š**ä¸»è¦åŠ åœ¨TakeDamageé‡Œ & åŠ¨ç”»è§¦å‘**

1. ç©å®¶æŒ‰ä¸‹é˜²å¾¡é”®ï¼Œè¿›å…¥é˜²å¾¡çŠ¶æ€`isGuard`å’Œ `characterStats.isDefend`ã€‚
2. å½“æ•Œäººæ”»å‡»ç©å®¶æ—¶ï¼Œè°ƒç”¨`TakeDamage` æ–¹æ³•ã€‚
3. å¦‚æœç©å®¶å¤„äºé˜²å¾¡çŠ¶æ€ï¼Œè¿›å…¥ç›¾åé€»è¾‘ï¼š
   - è®¡ç®—åå¼¹ä¼¤å®³å¹¶åº”ç”¨åˆ°æ”»å‡»è€…ã€‚
   - è§¦å‘æ”»å‡»è€…çš„å—å‡»åŠ¨ç”»ã€‚
4. åŠ¨ç”»ç³»ç»ŸåŒæ­¥é˜²å¾¡çŠ¶æ€ï¼Œç¡®ä¿è§†è§‰æ•ˆæœã€‚



- **CharacterStats.cs** çš„ ä¸¤ä¸ªTakeDamageä¸­çš„ç¬¬ä¸€ä¸ª

  ```c++
  public void TakeDamage(CharacterStats attacker, CharacterStats defender)
      {
          //New : åŠ å…¥ç›¾åé€»è¾‘
          // åˆ¤æ–­æ˜¯å¦ä¸ºç©å®¶ï¼Œå¹¶ä¸”æ˜¯å¦å¤„äºç›¾åçŠ¶æ€
          if (defender.GetComponent<PlayerController>() != null && defender.isDefend) //ç©å®¶ç›¾åé€»è¾‘
          {
              // Debug.Log("Player is defending, applying shield rebound logic.");
  
              //è®¡ç®—ä¼¤å®³
              int damage = Mathf.Max(attacker.CurrentDamage() - defender.CurrentDefence, 1); //ç›¾åè‡³å°‘é€ æˆ1ç‚¹ä¼¤å®³
              int damage_rebound = Mathf.Max(Mathf.CeilToInt(damage * 0.5f), 1); // åå¼¹æ”»å‡»è€…ä¼¤å®³çš„50%
              int damage_take = Mathf.Max(Mathf.CeilToInt(damage * 0.35f), 1); // å—åˆ°æ”»å‡»è€…ä¼¤å®³çš„35%
  
              //ä¼¤å®³->ç”Ÿå‘½
              attacker.CurrentHealth = Mathf.Max(attacker.CurrentHealth - damage_rebound, 0);
              CurrentHealth = Mathf.Max(CurrentHealth - damage_take, 0);
              //åŠ¨ç”»
              attacker.GetComponent<Animator>().SetTrigger("Hit");// è§¦å‘æ”»å‡»è€…çš„ è¢«ç›¾å åŠ¨ç”»
              //è¡€é‡UI
              attacker.UpdateHealthBarOnAttack?.Invoke(attacker.CurrentHealth, attacker.MaxHealth);// æ›´æ–°æ”»å‡»è€…è¡€é‡UI
              UpdateHealthBarOnAttack?.Invoke(CurrentHealth, MaxHealth);// æ›´æ–°é˜²å¾¡è€…è¡€é‡UI
              //ç»éªŒå€¼
              if (attacker.CurrentHealth <= 0)
                  characterData.UpdateExp(attacker.characterData.killPoint);// æ›´æ–°é˜²å¾¡è€…ç»éªŒå€¼
              if (CurrentHealth <= 0)
                  attacker.characterData.UpdateExp(characterData.killPoint);// æ›´æ–°æ”»å‡»è€…ç»éªŒå€¼
          }
          else // æ™®é€šä¼¤å®³é€»è¾‘ï¼ˆéç›¾åï¼‰
          {
              // Debug.Log("Character is not defending, applying normal damage logic.");
  
              int damage = Mathf.Max(attacker.CurrentDamage() - defender.CurrentDefence, 0);
              CurrentHealth = Mathf.Max(CurrentHealth - damage, 0);
  
              if (attacker.isCritical)
                  defender.GetComponent<Animator>().SetTrigger("Hit"); //è§¦å‘æš´å‡»åŠ¨ç”»
  
              //updateè¡€é‡UI
              UpdateHealthBarOnAttack?.Invoke(CurrentHealth, MaxHealth);
              //äººç‰©å±æ€§å‡çº§
              if (CurrentHealth <= 0)
                  attacker.characterData.UpdateExp(characterData.killPoint);// æ›´æ–°å‡»æ€è€…ç»éªŒå€¼
          }
      }
  ```

- **PlayereController.cs** ä»£ç ä¿®æ”¹ï¼Œå¢åŠ å¯¹åº”çš„å˜é‡ï¼Œä»¥åŠåŠ¨ç”»å¯¹åº”ï¼ŒåŒæ—¶è®¾ç½®é•¿æŒ‰Gé”®å¯åŠ¨ç›¾å

  ```c++
  bool isShielding; //æ˜¯å¦æ­£åœ¨ç›¾å
  
  //....
  
  void Update()
  {
      isDead = characterStats.CurrentHealth <= 0;
      //ç›¾å
      isShielding = Input.GetKey(KeyCode.G);//æ˜¯å¦æŒ‰ä½Gé”®è¿›è¡Œç›¾åï¼ˆæ¾å¼€å³å–æ¶ˆï¼‰
      characterStats.isDefend = isShielding; //æ›´æ–°characterStatsçš„ç›¾åçŠ¶æ€
      // Debug.Log("Shielding status: " + isShielding);
  
      if (isDead)//è¿›è¡Œå¹¿æ’­
          GameManager.Instance.NotifyObservers(); //é€šçŸ¥æ‰€æœ‰è§‚å¯Ÿè€…
  
      SwitchAnimation(); //æ¯å¸§æ›´æ–°åŠ¨ç”»çŠ¶æ€
      lastAttackTime -= Time.deltaTime; // æ”»å‡»å†·å´æ—¶é—´çš„è¡°å‡
  }
  
  private void SwitchAnimation()
  {
      anim.SetFloat("Speed", agent.velocity.sqrMagnitude); //è®¾ç½®å‰ç«¯çš„åŠ¨ç”»é€Ÿåº¦å‚æ•°
      anim.SetBool("Critical", characterStats.isCritical); //è®¾ç½®æš´å‡»çŠ¶æ€
      anim.SetBool("Death", isDead); //è®¾ç½®æ­»äº¡çŠ¶æ€
      anim.SetBool("Defend", isShielding); //è®¾ç½®ç›¾åçŠ¶æ€
  }
  ```

- **player prefabé‡Œçš„åŠ¨ç”»**ä¿®æ”¹

  <img src="./assets/image-20250709151524672.png" alt="image-20250709151524672" style="zoom:50%;" />

  

<img src="./assets/image-20250709151252924.png" alt="image-20250709151252924" style="zoom:50%;" />



### 6ã€æ•°å€¼éƒ¨åˆ†è°ƒæ•´

**Key : gpt+è¯•ç©æ¥è°ƒæ•´æ•°å€¼**

- å¸Œæœ›æ­£å¸¸ç©å®¶åº”è¯¥æ˜¯æ¥å®Œâ€æ”¶é›†è˜‘è‡â€œï¼ˆå¯ä»¥è·¯ä¸Šæ¡æ™®é€šå‰‘ï¼‰->"å²è±å§†"ï¼ˆé»‘æ›œå·¨åˆƒï¼‰->â€ç»¿å·¨äººâ€ï¼ˆå†°é­„å‰‘ï¼‰->"çŸ³å¤´äºº"ï¼ˆç›¾ç‰Œï¼Œé«˜é˜²ï¼‰->"é£è¡Œå…½" ï¼ˆé«˜çº§ç©å®¶å¯ä»¥ç•¥å¾®è·³ä¸€ä¸¤æ­¥ï¼‰


- ç«æŠ€åœºè´¯ç©¿å§‹ç»ˆï¼šéª¨å¤´æ€ªï¼ˆâ‰ˆç»¿å·¨äººï¼‰â€”â€”ç‹¼äººï¼ˆâ‰ˆçŸ³å¤´äººï¼‰â€”â€”é›ªäººâ€”â€”é»‘ç‰›å°†å†›




#### 4.1 ç§»åŠ¨é€Ÿåº¦ å‚æ•°

- **Speed** ä½“ç°ç›´çº¿ç§»åŠ¨å¿«æ…¢ï¼ˆm/sï¼‰ã€‚

- **Angular Speed** ä½“ç°è½¬å‘çµæ´»åº¦ï¼ˆdeg/sï¼‰ã€‚

- **Acceleration** å†³å®šèµ·æ­¥ / è½¬å¼¯æ—¶çˆ¬å‡åˆ°ç›®æ ‡é€Ÿåº¦çš„â€œçˆ†å‘æ„Ÿâ€ã€‚

- **Stopping Distance** åœ¨è¿›å…¥æ­¤è·ç¦»æ—¶å¼€å§‹åœä¸‹å¹¶åˆ‡æ¢æ”»å‡»çŠ¶æ€ã€‚

- **Auto Braking** å…¨éƒ¨ä¿æŒ **å…³é—­**ï¼ˆå‹¾é€‰ä¼šè®©è¿½äººæ—¶çªç„¶å‡é€Ÿï¼Œæ˜¾å¾—ç”Ÿç¡¬ï¼‰ã€‚

| æ€ªç‰©                 | **Speed** | **Angular** | **Accel.** | **StopDist** | è°ƒæ•´è¯´æ˜ï¼ˆä¸€å¥è¯ï¼‰         |
| -------------------- | --------- | ----------- | ---------- | ------------ | -------------------------- |
| å²è±å§†               | **2.4**   | 500         | 30         | 1.0          | ä¿æŒæ…¢ååï¼Œæ–¹ä¾¿æ–°æ‰‹é£ç­   |
| ä¹Œé¾Ÿå£³ (Turtleshell) | **2.2**   | 400         | 40         | 1.0          | ç”²å£³åšé‡ï¼Œæ•´ä½“å†æ…¢ 0.8     |
| ç»¿å·¨äºº (Grunt)       | **3.4**   | 520         | 85         | 1.0          | ä¸­é€Ÿã€èµ·æ­¥çŒ›               |
| çŸ³å¤´äºº (Golem)       | **2.2**   | 420         | 38         | 1.2          | é‡å‹ï¼›è½¬å‘ç¨é’ï¼Œæ¥è¿‘åè“„åŠ› |
| **é£è¡Œå…½**           | **4.6**   | 620         | 110        | 2.0          | æœ€é«˜é€Ÿä¿¯å†²ï¼Œæ‹‰å¤§æ¥è§¦åŠå¾„   |
| **éª¨å¤´æ€ª**           | **3.2**   | 560         | 60         | 0.8          | è„†çš®å¿«è·‘ï¼Œéªšæ‰°å‹           |
| **ç‹¼äºº**             | **4.3**   | 720         | 120        | 0.8          | å…¨åœºæœºåŠ¨ç‹ï¼Œéœ€ç¿»æ»šèº²æ‰‘     |
| **é›ªäºº**             | **3.0**   | 520         | 60         | 1.5          | è¿‘æˆ˜è‚‰æ                   |
| **é»‘ç‰›å°†å†›**         | **3.8**   | 480         | 150        | 1.0          | ç›´çº¿å†²é”‹çˆ†å‘é«˜ã€è½¬å¼¯æ…¢     |



##### è¯•ç©è°ƒä¼˜Tips

1. **è½¬å¼¯ç”©ä¸ç”©å¾—æ‰ï¼Ÿ** å¦‚æœå‘ç°ç©å®¶å¾ˆéš¾ç”©å¼€â€œç‹¼äººâ€æˆ–â€œé»‘ç‰›â€ï¼Œå…ˆä¸‹è°ƒå®ƒä»¬çš„ *Angular* è€Œä¸æ˜¯ *Speed*ã€‚
2. **å†²é”‹æ€ªéœ€ç•™å‡†å¤‡æ—¶é—´**ï¼šæŠŠå®ƒä»¬çš„ *Stopping Distance* è®¾å¾—ç¨å¤§ï¼ˆâ‰¥1.0ï¼‰ï¼Œè®© AI æœ‰ä¸€æ®µâ€œå‹æªâ€åŠ¨ä½œï¼Œçœ‹èµ·æ¥æ›´è‡ªç„¶ã€‚
3. **è¿œç¨‹å†°å¼¹ & é£è¡Œå…½ä¿¯å†²**ï¼šå¯¹åº” Animation / Skill é‡Œè®°å¾—ç”¨ StoppingDistance å»è§¦å‘ï¼Œå¦åˆ™ä¼šæ— é™è´´è„¸ã€‚



#### 4.2 æ•Œäºº & æ­¦å™¨ / ç›¾ç‰Œæ•°å€¼

##### è®¾è®¡æ€è·¯ï¼ˆæµ“ç¼©ç‰ˆï¼‰

| ç¯èŠ‚            | ç©å®¶å¸¸ç”¨è£…å¤‡              | ç›®æ ‡ä½“éªŒ                       | æ•°å€¼æŠ“æ‰‹                                                     |
| --------------- | ------------------------- | ------------------------------ | ------------------------------------------------------------ |
| æ–°æ‰‹ â†’ å²è±å§†   | æ™®é€šå‰‘ï¼ˆDPSâ‰ˆ7 / sï¼‰       | 2~3 ä¸‹è§£å†³ï¼Œå‡ ä¹æ— å‹åŠ›         | å²è±å§†è¡€é‡ 20ã€é˜² 1ï¼Œæ”»å‡»ä½                                  |
| å²è±å§† â†’ ç»¿å·¨äºº | é»‘æ›œå·¨åˆƒï¼ˆDPSâ‰ˆ9 / sï¼‰     | 8~10 ç§’å‡»æ€ï¼›è‹¥æŠ€æœ¯å¥½å¯â€œè·³æœ¬â€  | ç»¿å·¨äººè¡€é‡ 80ã€é˜² 4ï¼Œä¼¤å®³ä¸­ç­‰                                |
| ç»¿å·¨äºº â†’ çŸ³å¤´äºº | å†°é­„å‰‘ï¼ˆDPSâ‰ˆ11 / sï¼‰      | 12~15 ç§’çš„ç¡¬ä»—ï¼Œæ‰ç›¾ç‰Œæ˜¾è‘—å‡ä¼¤ | çŸ³å¤´äººé«˜é˜² 8ï¼Œé«˜è¡€ 120ï¼Œæ”»é«˜å†·å´é•¿                           |
| çŸ³å¤´äºº â†’ é£è¡Œå…½ | å†°é­„å‰‘ + ç›¾ç‰Œï¼ˆç©å®¶é˜²â‰ˆ7ï¼‰ | é£è¡Œå…½æœºåŠ¨ã€çˆ†å‘é«˜ï¼Œè€ƒéªŒæ»šé—ª   | é£è¡Œå…½ä¼¤å®³é«˜ã€å†·å´çŸ­ã€é˜²å¾¡ä¸­ç­‰                               |
| ç«æŠ€åœº          | å’Œä¸»çº¿åŒè£…å¤‡              | éš¾åº¦å¯¹åº”â€œâ‰ˆâ€æ³¨è§£                | ä¾å„æ€ªç‰¹æ€§è°ƒä¼˜ï¼šéª¨å¤´æ€ªåè„†ï¼Œç‹¼äººæ”»é€Ÿå¿«ï¼Œé›ªäººè¿‘æˆ˜è‚‰æï¼Œé»‘ç‰›å°†å†›ç»ˆæè€ƒéªŒ |



##### ä¸»çº¿ æ•°å€¼

| åç§°                     | Max Health | Base Defence | Kill Point | Attack Range | Skill Range | CoolDown | Min Dmg | Max Dmg | Crit Mult | Crit Chance |
| ------------------------ | ---------- | ------------ | ---------- | ------------ | ----------- | -------- | ------- | ------- | --------- | ----------- |
| **Player(åˆå§‹)**         | **100**    | **2**        | **â€”**      | **2.4**      | **0**       | **1**    | **5**   | **8**   | **2.0**   | **0.2**     |
| **å²è±å§†**               | **20**     | **1**        | **5**      | 1.0          | 0           | 1.2      | 2       | 4       | 1.5       | 0.05        |
| **ä¹Œé¾Ÿå£³**               | 30         | 3            | 10         | 1.2          | 0           | 1.5      | 3       | 5       | 1.5       | 0.1         |
| **ç»¿å·¨äºº (Grunt)**       | 80         | 4            | 20         | 2.3          | 1.6         | 1.8      | 6       | 8       | 2.0       | 0.15        |
| **çŸ³å¤´äºº (Golem)**       | 120        | 8            | 35         | 2.0          | 10.0        | 2.5      | 10      | 14      | 2.0       | 0.10        |
| **é£è¡Œå…½**               | 90         | 3            | 40         | 1.5          | 3.0         | 1.0      | 12      | 18      | 2.2       | 0.25        |
| **æ™®é€šå‰‘(Sword)**        | â€”          | â€”            | â€”          | **2.6**      | 0           | **1.0**  | **6**   | **9**   | 2.0       | 0.15        |
| **é»‘æ›œå·¨åˆƒ(BroadSword)** | â€”          | â€”            | â€”          | **2.8**      | 0           | **1.25** | **10**  | **14**  | 2.2       | 0.20        |
| **å†°é­„å‰‘(IceSword)**     | â€”          | â€”            | â€”          | **2.5**      | 0           | **0.8**  | **8**   | **11**  | 1.8       | 0.50        |
| **ç›¾ç‰Œ(Shield)**         | â€”          | **7**        | â€”          | â€”            | â€”           | â€”        | â€”       | â€”       | â€”         | â€”           |

- **ç­‰çº§æˆé•¿**ï¼šæŒ‰ä½ çš„ `LevelMultiplier = 0.1`ï¼Œç©å®¶åˆ°æ‰“çŸ³å¤´äººæ—¶é€šå¸¸ 3~4 çº§ï¼Œè‡ªèº« `Base Defence`â‰ˆ3ï¼›è£…å¤‡ç›¾ç‰Œåæ•´ä½“è·³åˆ° 7ï¼Œèƒ½æ˜æ˜¾é™ä½é£è¡Œå…½åŠç«æŠ€åœºé«˜é˜¶æ€ªçš„å•å‡»ä¼¤å®³ï¼Œä½†ä»éœ€ä¾èµ–èµ°ä½ã€‚

- **é«˜çº§ç©å®¶è·³æœ¬**ï¼šä¾é èµ°ä½å¯ç›´æ¥æŒ‘æˆ˜æ›´é«˜é˜¶æ®µï¼Œå› ä¸ºè¡€é‡/ä¼¤å®³å‘ˆ 1.3~1.5 å€æ¢¯åº¦é€’å¢ï¼Œå®¹é”™ä»åœ¨å¯æ§èŒƒå›´ã€‚

- **é»‘æ›œå·¨åˆƒ**æ‹‰é«˜äº†æœ€å°/æœ€å¤§ä¼¤å®³ï¼Œä»ä¿æŒåæ…¢æ‰‹æ„Ÿï¼›**å†°é­„å‰‘**åˆ™ä»¥é«˜æš´å‡»+çŸ­ CD å¸¦æ¥ DPTï¼ˆDamage Per Timeï¼‰æœ€é«˜è¾“å‡ºï¼Œåˆ©äºè¶Šçº§ã€‚

  

##### ç«æŠ€åœºæ•Œäººæ•°å€¼

| åç§°         | Max Health | Base Defence | Kill Point | Attack Range | Skill Range | CoolDown | Min Dmg | Max Dmg | Crit Mult | Crit Chance | ç‰¹ç‚¹å¤‡æ³¨                  |
| ------------ | ---------- | ------------ | ---------- | ------------ | ----------- | -------- | ------- | ------- | --------- | ----------- | ------------------------- |
| **éª¨å¤´æ€ª**   | 75         | 3            | 20         | 2.3          | 0           | 1.8      | 6       | 9       | 2.0       | 0.15        | è¿‘æˆ˜è„†çš®ï¼Œç§»é€Ÿç•¥å¿«        |
| **ç‹¼äºº**     | 100        | 6            | 30         | 1.8          | 3.0         | 1.2      | 10      | 15      | 2.0       | 0.20        | é«˜æ”»é€Ÿ+è·³æ‰‘æŠ€èƒ½           |
| **é›ªäºº**     | 110        | 5            | 45         | 1.7          | 2.5         | 2.0      | 8       | 12      | 1.8       | 0.25        | è¿‘æˆ˜æ€ª                    |
| **é»‘ç‰›å°†å†›** | 250        | 10           | 100        | 2.8          | 3.8         | 1.5      | 15      | 25      | 2.5       | 0.30        | ç»ˆæ Bossï¼Œå†²é”‹æŠ€èƒ½é™„æ™•çœ© |



##### æ•°å€¼æ ¡éªŒ

| æ­¦å™¨     | âŒ€ å•å‡»ä¼¤å®³                               | CD   | **ç†è®º DPS** |
| -------- | ---------------------------------------- | ---- | ------------ |
| æ™®é€šå‰‘   | 7.5 Ã— (1-0.2) + 7.5 Ã— 2 Ã— 0.2 = **9**    | 1.0  | **9/s**      |
| é»‘æ›œå·¨åˆƒ | 12 Ã— (0.8) + 12 Ã— 2.2 Ã— 0.2 = **14.9**   | 1.25 | **11.9/s**   |
| å†°é­„å‰‘   | 9.5 Ã— (0.5) + 9.5 Ã— 1.8 Ã— 0.5 = **13.3** | 0.8  | **16.6/s**   |

âŒ€å•å‡»ä¼¤å®³ = âŒ€åŸºç¡€ä¼¤ Ã— [(1 - æš´å‡»ç‡) Ã— 1 + æš´å‡»ç‡ Ã— æš´å‡»å€æ•°]

- **å²è±å§†** ä½“åŠ› 20 â†’ 2-3 ä¸‹è¢«æ™®é€šå‰‘ç§’æ€
- **ç»¿å·¨äºº** ä½“åŠ› 80ã€é˜² 4 â†’ é»‘æ›œå·¨åˆƒçº¦ 7-8 ç§’è§£å†³
- **çŸ³å¤´äºº** ä½“åŠ› 120ã€é˜² 8 â†’ å†°é­„å‰‘ + ç›¾ç‰Œï¼ˆé˜² 7ï¼‰çº¦ 12-15 ç§’
- **é£è¡Œå…½** ä½“åŠ› 90ã€é˜² 3 â†’ åŒè£…å¤‡çº¦ 10 ç§’ï¼Œä½†é«˜è¾“å‡ºã€çŸ­ CDï¼Œé€¼ç©å®¶é—ªé¿



##### è¯•ç©è°ƒä¼˜Tips

1. **ä¼¤å®³å…¬å¼**å¦‚æœåŒ…å«é˜²å¾¡å‡å…ç³»æ•°ï¼Œå¯æŠŠå„æ•Œäººçš„ Min/Max ä¼¤å®³ Â±12 å¾®è°ƒï¼Œä»¥ç»´æŒ 6~~12 æ¬¡è¢«å‡»å€’å®¹å¿åº¦ã€‚
2. **ç©å®¶ç­‰çº§æ›²çº¿**ï¼šç° Kill Point ä¸ `BaseExp=50` å¯¹åº”åˆšå¥½ 10 åªå²è±å§†å‡ 1 çº§ï¼Œçº¦ 3 åªç»¿å·¨äººå‡ 1 çº§ï¼›è‹¥è§‰å¾—æ…¢ï¼Œå¯æŠŠ `LevelMultiplier` æ”¹æˆ 0.08ã€‚
3. **BOSS ç‰¹æ•ˆ**ï¼ˆå†²é”‹ã€å†°å¼¹å‡é€Ÿï¼‰ä»…å†™åœ¨æ³¨é‡Šä¸­ï¼Œæ–¹ä¾¿åæœŸåœ¨ Animator æˆ–æŠ€èƒ½ç³»ç»Ÿé‡Œè¡¥å……ã€‚



#### 4.3  Playerå‡çº§ç›¸å…³

| åˆ†ç±»         | å­—æ®µåï¼ˆè„šæœ¬å˜é‡ï¼‰ | **ç­‰çº§ 1 åˆå§‹å€¼** | **å‡çº§å¢å¹… / å…¬å¼**                                          | é™åˆ¶ / å¤‡æ³¨                       |
| ------------ | ------------------ | ----------------- | ------------------------------------------------------------ | --------------------------------- |
| **ç»éªŒ**     | `baseExp`          | **50**            | `baseExp += baseExp * 0.1` â€ƒâ†’ æ¯çº§ +10 %                     | å¯æ”¹ç³»æ•° `0.1`                    |
| **ç”Ÿå‘½**     | `maxHealth`        | **100**           | `maxHealth *= 1.1` â€ƒâ†’ æ¯çº§ +10 %                             | åŒä¸Š                              |
| **é˜²å¾¡**     | `baseDefence`      | **2**             | `baseDefence *= 1.1` â€ƒâ†’ æ¯çº§ +10 %                           | åŒä¸Š                              |
| **ç§»åŠ¨**     | `baseMoveSpeed`    | **3.5 m/s**       | `newSpeed = baseMoveSpeed * (1 + 0.03 Ã— (levelâˆ’1))` â€ƒâ†’ æ¯çº§ +3 % | `Mathf.Min(newSpeed, 6.0f)` ä¸Šé™  |
|              | `angularSpeed`     | **800 deg/s**     | `Mathf.Lerp(800, 900, (speedâˆ’3.5)/(6.0âˆ’3.5))`                | éšç›´çº¿é€Ÿåº¦å¾®æï¼Œæœ€å¤š 900          |
|              | `acceleration`     | **80**            | **ä¿æŒä¸å˜**ï¼ˆå¦‚éœ€åŒæ­¥å¢é•¿å¯ä¸é€Ÿåº¦åŒå€ç‡ï¼‰                   | â€”                                 |
| **æˆé•¿ç³»æ•°** | `LevelMultiplier`  | **0.1**           | ç»Ÿä¸€æ§åˆ¶ **ç»éªŒ / ç”Ÿå‘½ / é˜²å¾¡** ä¸‰é¡¹çš„ 10 % å¢å¹…             | Inspectorä¸­çš„ **Level Buff** å­—æ®µ |

- ç§»åŠ¨éƒ¨åˆ†å‡åˆ° **10 çº§ â‰ˆ 4.6 m/s**ï¼›å‡åˆ° **20 çº§ â‰ˆ 5.6 m/s**ï¼›**30 çº§åŠä»¥ä¸Šæ’ 6 m/s**ã€‚ ç©å®¶åœ¨ä¸»çº¿æ‰“å®Œé£è¡Œå…½ä¸€èˆ¬ 6~7 çº§ï¼ˆâ‰ˆ4.2 m/sï¼‰ï¼Œä¸ä¹‹å‰4.1è¡¨æ•Œäººé€Ÿåº¦æ¢¯åº¦åˆšå¥½å’¬åˆã€‚



##### è¯•ç©è°ƒä¼˜Tips

1. **æƒ³è®©ç©å®¶æ›´è‚‰**ï¼šåªæ”¹ `LevelMultiplier`ï¼Œä¸€å¤„ç”Ÿæ•ˆå¤šå¤„ã€‚
2. **æƒ³åŠ å¿«å‡çº§èŠ‚å¥**ï¼šæŠŠ `baseExp` åˆå€¼è°ƒä½ï¼Œæˆ–æŠŠ `LevelMultiplier` ä» `0.1` æ”¹æˆ `0.08`ã€‚
3. **é€Ÿåº¦å¤ªå¿«ä¸å¥½æ§**ï¼šé™ä½ `speedGrowthRate` æˆ–æŠŠ `6.0f` ä¸Šé™å¾€ä¸‹è°ƒã€‚
4. **éœ€è¦æ›´çµæ´»è½¬å‘**ï¼šç›´æ¥æŠŠ `angularSpeed` å›ºå®šä¸º `agent.angularSpeed = 800 + 20 * (currentLevel-1)`ï¼Œç®€å•ç›´è§‚ã€‚



### 7ã€å¢åŠ æ­£å¸¸çŠ¶æ€çš„è‡ªåŠ¨å›è¡€åŠŸèƒ½

åœ¨CharacterStats.csé‡Œå¢åŠ å¯¹åº”å›è¡€å‚æ•°ï¼Œåœ¨å®ƒçš„Updateé‡Œå®ç°å›è¡€ã€‚



### 8ã€å¢åŠ å†…æµ‹çš„æ— æ•Œæ¨¡å¼&å‡çº§æ¨¡å¼

<img src="./assets/image-20250710090124635.png" alt="image-20250710090124635" style="zoom:50%;" />



## MileStone 2

### æ–°å¢éƒ¨åˆ†æ•ˆæœå›¾ç‰‡åˆé›†

æ–°å¢æ•ˆæœè§READMEçš„æ•ˆæœè§†é¢‘.

### é«˜çº§åŠŸèƒ½å¼€å‘&å­¦ä¹ æ€»ç”¨æ—¶

90h 35min 52s.



## è‡´è°¢

æ„Ÿè°¢Michaelè€å¸ˆçš„è¯¾ç¨‹ï¼Œæ„Ÿè°¢å°ç¨ä¸è€ç‹çš„æµ‹è¯•ã€‚
